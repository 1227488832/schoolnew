"use strict";(self["webpackChunkschoolactivities"]=self["webpackChunkschoolactivities"]||[]).push([[172],{1172:function(t,e,i){i.r(e),i.d(e,{default:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"updata"}},[t.PicVal?e("div",{staticClass:"BigPic",on:{click:t.SomePic}},[1==t.sindex?e("img",{attrs:{src:i(5742)}}):t._e(),2==t.sindex?e("img",{attrs:{src:i(8078)}}):t._e(),3==t.sindex?e("img",{attrs:{src:i(7495)}}):t._e(),4==t.sindex?e("img",{attrs:{src:i(6662)}}):t._e(),5==t.sindex?e("img",{attrs:{src:i(1599)}}):t._e(),6==t.sindex?e("img",{attrs:{src:i(6477)}}):t._e(),7==t.sindex?e("img",{attrs:{src:i(8297)}}):t._e(),8==t.sindex?e("img",{attrs:{src:i(6839)}}):t._e(),9==t.sindex?e("img",{attrs:{src:i(4375)}}):t._e(),10==t.sindex?e("img",{attrs:{src:i(8069)}}):t._e()]):t._e(),e("Music"),e("div",{staticClass:"home_container"},[e("div",{staticClass:"iconback",on:{click:t.back}},[e("img",{attrs:{src:i(84),alt:""}})]),t._m(0),e("div",{staticClass:"title"},[t._v("上传游戏信息")]),e("div",{staticClass:"home_form"},[e("van-field",{attrs:{label:"游戏ID:",readonly:""},on:{focus:t.userId},model:{value:t.userForm.gameId,callback:function(e){t.$set(t.userForm,"gameId",e)},expression:"userForm.gameId"}}),e("van-field",{attrs:{label:"游戏段位:",readonly:""},on:{focus:t.userDw},model:{value:t.userForm.gameValue,callback:function(e){t.$set(t.userForm,"gameValue",e)},expression:"userForm.gameValue"}}),e("van-action-sheet",{attrs:{actions:t.actions},on:{select:t.onSelect},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1),t._m(1),e("div",{staticClass:"uploader"},[e("div",{staticClass:"upload-bg"},[t.scanData?e("img",{staticStyle:{width:"100%"},attrs:{src:t.scanData,alt:""}}):e("img",{attrs:{src:i(8091),alt:""}})]),e("van-uploader",{attrs:{"after-read":t.afterRead}},[e("a",{staticClass:"updatabtn"},[t._v("上传游戏截图")])]),t.picloalog?e("Vue-imageCutting",{attrs:{picturePath:t.fileContent,crossDomain:t.crossDomainData},on:{confirm:t.confirmMethod,cancel:t.cancelMethod,rotate:t.rotateMethod,restore:t.restoreMethod,loading:t.loadingMethod,touching:t.touchingMethod}}):t._e()],1),t._m(2),e("div",{staticClass:"back",staticStyle:{"margin-bottom":"0.2rem"}},[e("div",{on:{click:t.truebtn}},[t._v("确认上传")])]),e("div",{staticClass:"up"},[e("van-popup",{model:{value:t.dialogValue,callback:function(e){t.dialogValue=e},expression:"dialogValue"}},[e("div",{staticClass:"dialog_title"},[e("span",[t._v("「上传提示」")])]),e("div",{staticClass:"word"},[e("div",{staticClass:"word_left"},[e("p",[t._v("请到活动现场处确认")]),e("p",[t._v("凭借上传成功截图方可领奖")]),e("p",[t._v("否则无效")])])]),e("div",{staticClass:"dialog_btn"},[e("div",{staticClass:"dialog_back"},[e("div",{on:{click:t.hcback}},[t._v("取消")])]),e("div",{staticClass:"dialog_back"},[e("div",{on:{click:t.goto}},[t._v("确定")])])])])],1),e("div",{staticClass:"uploadSuccess"},[e("van-popup",{model:{value:t.uploadSuccessVisible,callback:function(e){t.uploadSuccessVisible=e},expression:"uploadSuccessVisible"}},[e("div",{staticClass:"successContent"},[e("div",{staticClass:"id"},[t._v("您的游戏ID："+t._s(t.userForm.gameId||"无"))]),e("div",{staticClass:"v"},[t._v("您的游戏段位："+t._s(t.userForm.gameValue||"无"))]),e("div",{staticClass:"img",on:{click:t.BigImg}},[e("img",{staticStyle:{"object-fit":"cover"},attrs:{src:i(5742)}})]),e("div",{staticClass:"tip"},[t._v("请长按宣传海报保存至相册，发送朋友圈集赞！")]),e("div",{staticClass:"dialog_back"},[e("div",{on:{click:function(e){t.uploadSuccessVisible=!1}}},[t._v("确定")])])])])],1),t.loadingData?t._e():e("van-loading",{attrs:{type:"spinner",size:"24px"}},[t._v("加载中...")])],1)],1)},s=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"home_title"},[e("div",[t._v("雀巢咖啡，提醒每一天")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tixs"},[e("p",[t._v("示例:")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tix"},[e("p",[t._v("每位ID限量只能领取一次奖励！重复领取无效")])])}],o=(i(6513),i(8979)),n=i(6695),l=i(4545),c=i(1604),d={components:{Music:l.Z},data(){return{picturePathData:"xxx.jpg",crossDomainData:!1,show:!1,actions:[{name:"最强王者"},{name:"无双王者"},{name:"荣耀王者"}],userForm:{gameId:"",gameValue:""},getInfo:{id:"",val:""},uploadSuccessVisible:!1,dialogValue:!1,updataimg:{cont:"",name:"",lastModified:""},picdata:{recognize_id:"",recognize_level:"",img_uri:""},fileContent:"",file:null,loadingData:!0,loadimg:!1,option1:[{text:"全部商品",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],picloalog:!1,scanData:"",PicVal:!1,sindex:""}},computed:{...(0,c.rn)(["schoolindex"])},mounted(){this.init()},methods:{SomePic(){this.PicVal=!1},BigImg(){console.log(this.schoolindex),this.sindex=this.schoolindex,this.PicVal=!0},userDw(t){this.Toast("无需输入，请先上传图片")},userId(t){this.Toast("无需输入，请先上传图片")},init(){(0,o.nX)({url:""}).then((t=>{if(console.log(t),200===t.status){let e=t.data||{};jWeixin.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:[]}),jWeixin.ready((()=>{jWeixin.hideMenuItems({menuList:["menuItem:copyUrl","menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:QZone"]}),jWeixin.hideOptionMenu()}))}else this.handleError(t)}))},touchingMethod(t){},restoreMethod(t){console.log(t)},rotateMethod(t){console.log(t)},cancelMethod(t){console.log(t),this.picloalog=!1},loadingMethod(t){console.log(t)},confirmMethod(t){this.picloalog=!1,this.scanData=t.base64,this.getImageInfo()},cutDown(t){console.log(t)},onSelect(t){this.show=!1,this.userForm.gameValue=t.name},hcback(){this.dialogValue=!1},truebtn(){this.dialogValue=!0},back(){this.$router.push("/pagefive")},afterRead(t){console.log(t),this.file=t,this.updataimg.lastModified=t.file.type,this.updataimg.cont=t.content,this.fileContent=t.content,this.picloalog=!0},confirm(){this.dialogValue=!1},async getImageInfo(){this.getInfo.val="",this.getInfo.id="",this.loadingData=!1;let t="wUbxngjGDBUEsS-kulRcXh2Jp-9dXkVM",e="gxcRJD0wqwVElf2OemeFMLWqLIo9ywNR",i=this.scanData,a=new FormData;a.append("api_key",t),a.append("api_secret",e),a.append("image_base64",i),(0,n.Z)({url:"https://api-cn.faceplusplus.com/imagepp/v2/generalocr",method:"post",data:a}).then((t=>{if(this.loadingData=!0,200==t.status){let e=t.data.text_info,i=e.findIndex((t=>"我的排名"===t.line_content));if(i<0)return void this.Toast("请截图包含我的排名部分");let a=e[i+1]||{};this.userForm.gameId=a.line_content||"未获取到",this.getInfo.id=a.line_content||"未获取到";let s=["至尊星耀","最强王者","无双王者","荣耀王者"],o="";for(let t of e.slice(i)){let e=t.line_content,i=s.findIndex((t=>e.includes(t)));i>=0&&(o=s[i])}if(!o)return void this.Toast("很遗憾 您的段位没达到活动要求，邀请小伙伴们一起上分吧！");this.userForm.gameValue=o,this.getInfo.val=o}else this.Toast("获取截图信息失败，请重试")}))},async goto(){if(this.loadingData=!1,!this.getInfo.val)return this.Toast("很遗憾 您的段位没达到活动要求，邀请小伙伴们一起上分吧！"),void(this.loadingData=!0);if(""==this.userForm.gameId)return this.Toast("请输入游戏ID"),void(this.loadingData=!0);if(""==this.userForm.gameValue)return this.Toast("请输入段位"),void(this.loadingData=!0);if(this.getInfo.val!==this.userForm.gameValue)return this.Toast("请选择与上传图片一致的游戏段位！"),void(this.loadingData=!0);this.loadingData=!1;let t=await(0,o.WA)(),e=t.data.data;console.log(e);const i=new FormData,a=(new Date).getTime()+".jpg";i.append("name",`${a}`),i.append("key",e.dir+a),i.append("policy",e.policy),i.append("OSSAccessKeyId",e.accessid),i.append("callback",e.callback),i.append("signature",e.signature),i.append("file",this.file.file),console.log(this.file);await(0,o.F_)(e.host,i).then((t=>{console.log(t),200==t.data.status&&(this.picdata.img_uri=t.data.data.filename)}));console.log(this.picdata.img_uri),(0,o.FF)({game_id:this.userForm.gameId,game_level:this.userForm.gameValue,recognize_id:this.getInfo.id,recognize_level:this.getInfo.val,img_uri:this.picdata.img_uri}).then((t=>{console.log(t),this.loadingData=!0,200==t.data.status?(this.dialogValue=!1,this.uploadSuccessVisible=!0):this.Toast(t.data.msg)}))}}},r=d,g=i(8412),u=(0,g.Z)(r,a,s,!1,null,"82537478",null),m=u.exports},84:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAYCAYAAACyVACzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVFOTFGNzE5NjNGMDExRURCQ0JBRUIzQjRFRjFCNEZBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVFOTFGNzFBNjNGMDExRURCQ0JBRUIzQjRFRjFCNEZBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUU5MUY3MTc2M0YwMTFFREJDQkFFQjNCNEVGMUI0RkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUU5MUY3MTg2M0YwMTFFREJDQkFFQjNCNEVGMUI0RkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7vGhMFAAADrElEQVR42tyZW0gUURzGZ7Swm9FlKSvpAkVgRCWWFEkUXbaLFtntIQgpiZ56q16iXqqH3nrvoYigjLD7hdhuZFlk9VBKUqIR0QVLStNV9/Qd+AYOw9nZ44yzrg38mNmd/+7O+fxfj7YQwvJxjAJFoAe8Au0B7QbFMcTHZ8aACrATPAONSUQwtftvxZoEKsF+8Bv8AgvAX9ALpJsmwDiwHmwHP8EnkA/G874b4To718J1zxTLdda9Z2muda99iTUTHACbwA9wETwBXbxvc1FSlK1gGfgCzoD7ip2l2LtfC8217uG9coed4n7onjUPHAErwXtwiTmoRyPoDrAEvANnwXONnRVwQV6CiH76DV9iSQ85ChaCN+AC80/CZTeXYVcIXoDToF5j51607QoVk0NkWs7KZsgdAxPBI3AdNLseNosVr4J2d+l5jQbekUgSekE8K+1hmAv2gH1gAohRqO+uBxkBisFmkAdugCrwdQC9Q6TTs2QlO8zcI/9KV8E90OZKzCPBKrCR78nwvAZaDfOJ2xNECKLYKX4zkFiykp0AURAH1aCGrYH65REm+yir3HlWvHZNlfN6SNtnGJrah5bg89kalIJv4CYrWRd/1MkxEYZdCVsDmZ8eU1yvPJIxiTqIWHIhc8AhsIEJXOant6BbWag8TwNbWBnrGXq6FsI2FCVVP2XiQSKdYk0FB0EZQ+kl+KAp+REKVcwW4hxooJ2tnHX5xw4QVqKPnwstPLPYIkxhwv7DL8pS7qu2clwZBjqV92yDsEtnuIVaDVvASeac1WwqH9LD2hRbOeJcZmgWsmreBk85I1p+5q1+SuRpqYa2skVTAHaBcjAa1LHBbOGQnFBmv+VgMRjKankFfFRsejWDcm+S18JjoA5rkLY8cqUwEcvZVlkD9oJFzF13mMQ7lJ2F4dxtWAtmcw6s5lZMRxLBvHYbvETLWLGcYz63Ysq56BqOO82KCPI8HawDS9mLxShuE8PVVKhUImW0WE71K+XYU8Awk+PMa3qPYMuQy5CMsrI2sPeqVbxMJAnNVF5m+RQs7WKpQ/Juelk724sY578eZVGzuOFXwg2/W+SzT8/y61UDJpZzTAbbuEU8gw2r42VxxXPGghUchfKY66pYLDoNBBMGHpbxYskjh+FWyZCT28qnKIgaZtmcCMrYwEovO86wNAnD/qiIoYjVl21lOSM+YE6qZdWMa+y66UlN9LIiwy48kWQRGTM/2j7/FZbDbr5V6eaD2A2K458AAwCJWDlL/sW9gAAAAABJRU5ErkJggg=="},6839:function(t,e,i){t.exports=i.p+"img/qeight.61b6f778.jpg"},1599:function(t,e,i){t.exports=i.p+"img/qfive.71d2f07e.jpg"},6662:function(t,e,i){t.exports=i.p+"img/qfour.f6184dfa.jpg"},4375:function(t,e,i){t.exports=i.p+"img/qnine.f2149fa6.jpg"},5742:function(t,e,i){t.exports=i.p+"img/qone.d17c5d3e.jpg"},8297:function(t,e,i){t.exports=i.p+"img/qsenven.4d5e4462.jpg"},6477:function(t,e,i){t.exports=i.p+"img/qsix.acb87f5e.jpg"},8069:function(t,e,i){t.exports=i.p+"img/qten.f3038f42.jpg"},7495:function(t,e,i){t.exports=i.p+"img/qthree.66af428f.jpg"},8078:function(t,e,i){t.exports=i.p+"img/qtwo.6096ed09.jpg"},8091:function(t,e,i){t.exports=i.p+"img/yxsl.2bbd8d45.png"}}]);
//# sourceMappingURL=172.96712cf0.js.map