"use strict";(self["webpackChunkschoolactivities"]=self["webpackChunkschoolactivities"]||[]).push([[561],{6561:function(a,t,e){e.r(t),e.d(t,{default:function(){return r}});var i=function(){var a=this,t=a._self._c;return t("div",{attrs:{id:"updata"}},[t("div",{staticClass:"home_container"},[t("div",{staticClass:"iconback",on:{click:a.back}},[t("img",{attrs:{src:e(278),alt:""}})]),a._m(0),t("div",{staticClass:"title"},[a._v("上传游戏信息")]),t("div",{staticClass:"home_form"},[t("van-field",{attrs:{label:"游戏ID:"},model:{value:a.userForm.gameId,callback:function(t){a.$set(a.userForm,"gameId",t)},expression:"userForm.gameId"}}),t("van-field",{attrs:{label:"游戏段位:"},on:{focus:function(t){a.show=!0}},model:{value:a.userForm.gameValue,callback:function(t){a.$set(a.userForm,"gameValue",t)},expression:"userForm.gameValue"}}),t("van-action-sheet",{attrs:{actions:a.actions},on:{select:a.onSelect},model:{value:a.show,callback:function(t){a.show=t},expression:"show"}})],1),a._m(1),t("div",{staticClass:"uploader"},[t("div",{staticClass:"upload-bg"},[a.scanData?t("img",{staticStyle:{width:"100%"},attrs:{src:a.scanData,alt:""}}):t("img",{attrs:{src:e(8091),alt:""}})]),t("van-uploader",{attrs:{"after-read":a.afterRead}},[t("div",{staticClass:"updatabtn"},[a._v("上传游戏截图")])]),a.picloalog?t("Vue-imageCutting",{attrs:{picturePath:a.scanData,crossDomain:a.crossDomainData},on:{confirm:a.confirmMethod,cancel:a.cancelMethod,rotate:a.rotateMethod,restore:a.restoreMethod,loading:a.loadingMethod,touching:a.touchingMethod}}):a._e()],1),a._m(2),t("div",{staticClass:"back",staticStyle:{"margin-bottom":"0.2rem"}},[t("div",{on:{click:a.truebtn}},[a._v("确认上传")])]),t("div",{staticClass:"up"},[t("van-popup",{model:{value:a.dialogValue,callback:function(t){a.dialogValue=t},expression:"dialogValue"}},[t("div",{staticClass:"dialog_title"},[t("span",[a._v("「上传提示」")])]),t("div",{staticClass:"word"},[t("div",{staticClass:"word_left"},[t("p",[a._v("请到活动现场处确认")]),t("p",[a._v("凭借上传成功截图方可领奖")]),t("p",[a._v("否则无效")])])]),t("div",{staticClass:"dialog_btn"},[t("div",{staticClass:"dialog_back"},[t("div",{on:{click:a.hcback}},[a._v("取消")])]),t("div",{staticClass:"dialog_back"},[t("div",{on:{click:a.goto}},[a._v("确定")])])])])],1),a.loadingData?a._e():t("van-loading",{attrs:{type:"spinner",size:"24px"}},[a._v("加载中...")])],1)])},s=[function(){var a=this,t=a._self._c;return t("div",{staticClass:"home_title"},[t("div",{staticClass:"line"}),t("div",[a._v("雀巢咖啡，提醒每一天")]),t("div",{staticClass:"line"})])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"tixs"},[t("p",[a._v("示例:")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"tix"},[t("p",[a._v("每位ID限量只能领取一次奖励！重复领取无效")])])}],o=(e(7658),e(5214)),l=e(70),n={data(){return{picturePathData:"xxx.jpg",crossDomainData:!1,show:!1,actions:[{name:"最强王者"},{name:"无双王者"},{name:"荣耀王者"}],userForm:{gameId:"",gameValue:""},dialogValue:!1,updataimg:{cont:"",name:"",lastModified:""},picdata:{recognize_id:"",recognize_level:"",img_uri:""},file:null,loadingData:!0,loadimg:!1,option1:[{text:"全部商品",value:0},{text:"新款商品",value:1},{text:"活动商品",value:2}],picloalog:!1,scanData:""}},methods:{touchingMethod(a){},restoreMethod(a){console.log(a)},rotateMethod(a){console.log(a)},cancelMethod(a){console.log(a)},loadingMethod(a){console.log(a)},confirmMethod(a){console.log(a),console.log(this.scanData),this.picloalog=!1,this.scanData=a.base64},cutDown(a){console.log(a)},onSelect(a){this.show=!1,this.userForm.gameValue=a.name},hcback(){this.dialogValue=!1},truebtn(){this.dialogValue=!0},back(){this.$router.push("/pagefive")},afterRead(a){this.loadingData=!1,console.log(a),this.file=a,this.updataimg.lastModified=a.file.type,this.updataimg.cont=a.content;let t="wUbxngjGDBUEsS-kulRcXh2Jp-9dXkVM",e="gxcRJD0wqwVElf2OemeFMLWqLIo9ywNR",i=a.content,s=new FormData;s.append("api_key",t),s.append("api_secret",e),s.append("image_base64",i),(0,l.ZP)({url:"https://api-cn.faceplusplus.com/imagepp/v2/generalocr",method:"post",data:s}).then((a=>{if(console.log(a),200==a.status){this.loadimg=this.updataimg.cont,this.loadingData=!0;let o=a.data.text_info;console.log(o),this.scanData=i,this.picloalog=!0;let l=o[o.length-5].line_content.indexOf("我的排名");if(0==l){console.log(o[o.length-4].line_content),console.log(o[o.length-1].line_content);let i=o[o.length-1].line_content;var t=i,e=/[\u4e00-\u9fa5]/g,s=t.match(e);t=s.join(""),console.log(t),this.picdata.recognize_level=t,this.picdata.recognize_id=a.data.request_id}}}))},confirm(){this.dialogValue=!1},async goto(){if(this.loadingData=!1,""==this.userForm.gameId)return this.Toast("请输入游戏ID"),void(this.loadingData=!0);if(""==this.userForm.gameValue)return this.Toast("请输入段位"),void(this.loadingData=!0);let a=await(0,o.WA)(),t=a.data.data;console.log(t);const e=new FormData,i=this.file.file.name;e.append("name",`${(new Date).getTime()}${i}`),e.append("key",t.dir+i),e.append("policy",t.policy),e.append("OSSAccessKeyId",t.accessid),e.append("callback",t.callback),e.append("signature",t.signature),e.append("file",this.file.file),console.log(this.file);await(0,o.F_)(t.host,e).then((a=>{console.log(a),200==a.data.status&&(this.picdata.img_uri=a.data.data.filename)}));console.log(this.picdata.img_uri),(0,o.FF)({game_id:this.userForm.gameId,game_level:this.userForm.gameValue,recognize_id:this.picdata.recognize_id,recognize_level:this.picdata.recognize_level,img_uri:this.picdata.img_uri}).then((a=>{console.log(a),this.loadingData=!0,200==a.data.status?this.dialogValue=!0:this.Toast(a.data.msg)}))}}},c=n,d=e(1001),g=(0,d.Z)(c,i,s,!1,null,"59ae6aa5",null),r=g.exports},278:function(a){a.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAYCAYAAACyVACzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVFOTFGNzE5NjNGMDExRURCQ0JBRUIzQjRFRjFCNEZBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVFOTFGNzFBNjNGMDExRURCQ0JBRUIzQjRFRjFCNEZBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUU5MUY3MTc2M0YwMTFFREJDQkFFQjNCNEVGMUI0RkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUU5MUY3MTg2M0YwMTFFREJDQkFFQjNCNEVGMUI0RkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7vGhMFAAADrElEQVR42tyZW0gUURzGZ7Swm9FlKSvpAkVgRCWWFEkUXbaLFtntIQgpiZ56q16iXqqH3nrvoYigjLD7hdhuZFlk9VBKUqIR0QVLStNV9/Qd+AYOw9nZ44yzrg38mNmd/+7O+fxfj7YQwvJxjAJFoAe8Au0B7QbFMcTHZ8aACrATPAONSUQwtftvxZoEKsF+8Bv8AgvAX9ALpJsmwDiwHmwHP8EnkA/G874b4To718J1zxTLdda9Z2muda99iTUTHACbwA9wETwBXbxvc1FSlK1gGfgCzoD7ip2l2LtfC8217uG9coed4n7onjUPHAErwXtwiTmoRyPoDrAEvANnwXONnRVwQV6CiH76DV9iSQ85ChaCN+AC80/CZTeXYVcIXoDToF5j51607QoVk0NkWs7KZsgdAxPBI3AdNLseNosVr4J2d+l5jQbekUgSekE8K+1hmAv2gH1gAohRqO+uBxkBisFmkAdugCrwdQC9Q6TTs2QlO8zcI/9KV8E90OZKzCPBKrCR78nwvAZaDfOJ2xNECKLYKX4zkFiykp0AURAH1aCGrYH65REm+yir3HlWvHZNlfN6SNtnGJrah5bg89kalIJv4CYrWRd/1MkxEYZdCVsDmZ8eU1yvPJIxiTqIWHIhc8AhsIEJXOant6BbWag8TwNbWBnrGXq6FsI2FCVVP2XiQSKdYk0FB0EZQ+kl+KAp+REKVcwW4hxooJ2tnHX5xw4QVqKPnwstPLPYIkxhwv7DL8pS7qu2clwZBjqV92yDsEtnuIVaDVvASeac1WwqH9LD2hRbOeJcZmgWsmreBk85I1p+5q1+SuRpqYa2skVTAHaBcjAa1LHBbOGQnFBmv+VgMRjKankFfFRsejWDcm+S18JjoA5rkLY8cqUwEcvZVlkD9oJFzF13mMQ7lJ2F4dxtWAtmcw6s5lZMRxLBvHYbvETLWLGcYz63Ysq56BqOO82KCPI8HawDS9mLxShuE8PVVKhUImW0WE71K+XYU8Awk+PMa3qPYMuQy5CMsrI2sPeqVbxMJAnNVF5m+RQs7WKpQ/Juelk724sY578eZVGzuOFXwg2/W+SzT8/y61UDJpZzTAbbuEU8gw2r42VxxXPGghUchfKY66pYLDoNBBMGHpbxYskjh+FWyZCT28qnKIgaZtmcCMrYwEovO86wNAnD/qiIoYjVl21lOSM+YE6qZdWMa+y66UlN9LIiwy48kWQRGTM/2j7/FZbDbr5V6eaD2A2K458AAwCJWDlL/sW9gAAAAABJRU5ErkJggg=="},8091:function(a,t,e){a.exports=e.p+"img/yxsl.2bbd8d45.png"}}]);
//# sourceMappingURL=561.a6569ea5.js.map