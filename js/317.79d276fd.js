"use strict";(self["webpackChunkschoolactivities"]=self["webpackChunkschoolactivities"]||[]).push([[317],{8317:function(t,s,i){i.r(s),i.d(s,{default:function(){return h}});var a=function(){var t=this,s=t._self._c;return s("div",{attrs:{id:"twoupdata"}},[s("div",{staticClass:"home_container"},[s("div",{staticClass:"iconback",on:{click:t.back}},[s("img",{attrs:{src:i(278),alt:""}})]),t._m(0),s("div",{staticClass:"home_info"},[s("div",{staticClass:"home_info_cont"},[s("p",[t._v("已兑换咖啡：")]),s("p",[t._v(t._s(t.userInfo.conversion_num))])]),s("div",{staticClass:"home_info_cont"},[s("p",[t._v("已生成咖啡豆：")]),s("p",[t._v(t._s(t.userInfo.beans))])]),3==t.userInfo.beans?s("div",{staticClass:"hecheng",on:{click:t.hcbtn}},[t._v(" 合成 ")]):t._e()]),t._m(1),s("div",{staticClass:"pgree"},[s("van-progress",{attrs:{percentage:t.countnum,"stroke-width":"8"}})],1),s("div",{staticClass:"time"},[t._v(t._s(t.formatTime(t.count)))]),t._m(2),s("div",{staticClass:"back"},[s("div",{on:{click:function(s){return t.getCode(10800)}}},[t._v("开始计时")])]),s("div",{staticClass:"success"},[s("van-popup",{model:{value:t.dialogValue,callback:function(s){t.dialogValue=s},expression:"dialogValue"}},[s("div",{staticClass:"dialog_title"},[s("span",[t._v("「成功提示」")])]),s("div",{staticClass:"dialog_tis",staticStyle:{"font-size":"0.5333rem","margin-top":"1.3067rem"}},[t._v(" 恭喜您! ")]),s("div",{staticClass:"dialog_tis"},[t._v("今日的专注时间挑战已完成！")]),s("div",{staticClass:"dialog_tis"},[t._v("获得三颗咖啡豆,收集后，前往兑换处，")]),s("div",{staticClass:"dialog_tis"},[t._v("兑换咖啡券吧！")]),s("div",{staticClass:"dialog_back"},[s("div",{on:{click:function(s){t.dialogValue=!1}}},[t._v("确定")])])])],1),s("div",{staticClass:"dhsuccess"},[s("van-popup",{model:{value:t.dhsuccessdialog,callback:function(s){t.dhsuccessdialog=s},expression:"dhsuccessdialog"}},[s("div",{staticClass:"dialog_title"},[s("span",[t._v("「兑换提示」")])]),s("div",{staticClass:"word"},[s("div",{staticClass:"word_left"},[s("p",[t._v("亲爱的")]),s("p",[t._v(t._s(this.name.name))]),s("p",[t._v("同学")])]),s("div",{staticClass:"word_right"},[s("p",[t._v("您拥有")]),s("p",[t._v("3")]),s("p",[t._v("颗咖啡豆，可兑换元醇香滑一罐！")])]),s("h1",[t._v("是否兑换？")])]),s("div",{staticClass:"tis"},[s("p",[t._v("请到活动现场处确认,凭借兑换成功截图才可领奖，否则无效")])]),s("div",{staticClass:"dialog_btn"},[s("div",{staticClass:"dialog_back"},[s("div",{on:{click:t.hcback}},[t._v("取消")])]),s("div",{staticClass:"dialog_back"},[s("div",{on:{click:t.coffeesynthesis}},[t._v("确定")])])])])],1),s("div",{staticClass:"timedialog"},[s("van-popup",{model:{value:t.timedialog,callback:function(s){t.timedialog=s},expression:"timedialog"}},[s("div",{staticClass:"dialog_title"},[s("span",[t._v("「剩余提示」")])]),s("div",{staticClass:"word"},[s("div",{staticClass:"word_left"},[s("p",[t._v("今天的专注小工具有效时间")])]),s("div",{staticClass:"word_right"},[s("p",[t._v("还剩")]),s("p",[t._v(t._s(t.minute))]),s("p",[t._v("分钟")])])]),s("div",{staticClass:"dialog_back"},[s("div",{on:{click:function(s){t.timedialog=!1}}},[t._v("确定")])])])],1),s("div",{staticClass:"lastdialog"},[s("van-popup",{model:{value:t.lastdialog,callback:function(s){t.lastdialog=s},expression:"lastdialog"}},[s("div",{staticClass:"dialog_back"},[s("div",{on:{click:function(s){t.lastdialog=!1}}},[t._v("确定")])])])],1)])])},e=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"home_title"},[s("div",[t._v("雀巢咖啡，提醒每一天")]),s("h5",[t._v("同学，请放下手机专心读书吧！")])])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"home_ing"},[s("img",{attrs:{src:i(5963),alt:""}})])},function(){var t=this,s=t._self._c;return s("div",{staticClass:"tix"},[s("p",[t._v("集齐：三颗咖啡豆，请前往线下活动处兑换")])])}],o=(i(7658),i(5214));const n=t=>{var s=parseInt(t),i=0,a=0;s>=60&&(i=parseInt(s/60),s=parseInt(s%60),i>=60&&(a=parseInt(i/60),i=parseInt(i%60)));var e=`${a<10?"0"+a:a}:${i<10?"0"+i:i}:${s<10?"0"+s:s}`;return e};var l=i(3822),c={data(){return{userInfo:{conversion_num:"",beans:""},gameId:"",gameValue:"",dialogValue:!1,dhsuccessdialog:!1,timedialog:!1,lastdialog:!1,count:10800,countnum:0,timer:null,dialogIndex:0,minute:0,outTime:"",name:window.sessionStorage.getItem("userInfo")}},comments:{...(0,l.rn)(["outTime"])},mounted(){console.log(this.outTime),this.getInfo(),document.addEventListener("visibilitychange",this.handleVisiable)},destroyed(){document.removeEventListener("visibilitychange",this.handleVisiable)},methods:{...(0,l.OI)(["TimeChange"]),handleVisiable(t){switch(console.log(t),t.target.visibilityState){case"prerender":console.log("网页预渲染，内容不可见");break;case"hidden":console.log(this),console.log("内容不可见，处理后台、最小化、锁屏状态"),alert("警告！你已经离开当前答题页面");break;case"visible":console.log(this.outTime),this.getCode(this.outTime),console.log("处于正常打开");break}},formatTime(t){return console.log(t),n(t)},iconback(){this.$router.go(-1)},hcback(){this.dhsuccessdialog=!1},getInfo(){(0,o.Rh)().then((t=>{console.log(t),200==t.data.status&&(this.userInfo.conversion_num=t.data.data.conversion_num,this.userInfo.beans=t.data.data.beans)}))},getCode(t){console.log(t);const s=t;this.timer||(this.count=s,this.show=!1,this.timer=setInterval((()=>{this.count>0&&this.count<=s?(this.count%108==0&&this.count!==s&&(this.countnum++,99==this.countnum&&setTimeout((()=>{this.countnum+=1}),1e3)),7200!=this.count&&3600!=this.count&&0!=this.count||this.GetCoffeeData().then((t=>{console.log(t),200==t.data.status&&(this.timedialog=!0,this.dialogIndex++,1==this.dialogIndex&&(this.minute=60),2==this.dialogIndex&&(this.minute=120))})),this.count--,0==this.count&&(this.dialogValue=!0)):(this.show=!0,clearInterval(this.timer),this.timer=null),this.TimeChange(this.count)}),1e3))},coffeesynthesis(){(0,o.DP)().then((t=>{console.log(t),10003==t.data.status&&this.Toast(t.data.msg),10007==t.data.status&&this.Toast(t.data.msg),10008==t.data.status&&this.Toast(t.data.msg),15e3==t.data.status&&this.Toast(t.data.msg),200==t.data.status&&(this.lastdialog=!0,this.Toast(t.data.msg),this.userInfo.conversion_num=t.data.data.conversion_num,this.userInfo.beans=t.data.data.beans)}))},hcbtn(){this.dhsuccessdialog=!0},back(){this.$router.push("/pagetwo")},goto(){this.getCode(),this.timedialog=!0}}},d=c,v=i(1001),u=(0,v.Z)(d,a,e,!1,null,"a0ec096e",null),h=u.exports},278:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAYCAYAAACyVACzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVFOTFGNzE5NjNGMDExRURCQ0JBRUIzQjRFRjFCNEZBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVFOTFGNzFBNjNGMDExRURCQ0JBRUIzQjRFRjFCNEZBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUU5MUY3MTc2M0YwMTFFREJDQkFFQjNCNEVGMUI0RkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUU5MUY3MTg2M0YwMTFFREJDQkFFQjNCNEVGMUI0RkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7vGhMFAAADrElEQVR42tyZW0gUURzGZ7Swm9FlKSvpAkVgRCWWFEkUXbaLFtntIQgpiZ56q16iXqqH3nrvoYigjLD7hdhuZFlk9VBKUqIR0QVLStNV9/Qd+AYOw9nZ44yzrg38mNmd/+7O+fxfj7YQwvJxjAJFoAe8Au0B7QbFMcTHZ8aACrATPAONSUQwtftvxZoEKsF+8Bv8AgvAX9ALpJsmwDiwHmwHP8EnkA/G874b4To718J1zxTLdda9Z2muda99iTUTHACbwA9wETwBXbxvc1FSlK1gGfgCzoD7ip2l2LtfC8217uG9coed4n7onjUPHAErwXtwiTmoRyPoDrAEvANnwXONnRVwQV6CiH76DV9iSQ85ChaCN+AC80/CZTeXYVcIXoDToF5j51607QoVk0NkWs7KZsgdAxPBI3AdNLseNosVr4J2d+l5jQbekUgSekE8K+1hmAv2gH1gAohRqO+uBxkBisFmkAdugCrwdQC9Q6TTs2QlO8zcI/9KV8E90OZKzCPBKrCR78nwvAZaDfOJ2xNECKLYKX4zkFiykp0AURAH1aCGrYH65REm+yir3HlWvHZNlfN6SNtnGJrah5bg89kalIJv4CYrWRd/1MkxEYZdCVsDmZ8eU1yvPJIxiTqIWHIhc8AhsIEJXOant6BbWag8TwNbWBnrGXq6FsI2FCVVP2XiQSKdYk0FB0EZQ+kl+KAp+REKVcwW4hxooJ2tnHX5xw4QVqKPnwstPLPYIkxhwv7DL8pS7qu2clwZBjqV92yDsEtnuIVaDVvASeac1WwqH9LD2hRbOeJcZmgWsmreBk85I1p+5q1+SuRpqYa2skVTAHaBcjAa1LHBbOGQnFBmv+VgMRjKankFfFRsejWDcm+S18JjoA5rkLY8cqUwEcvZVlkD9oJFzF13mMQ7lJ2F4dxtWAtmcw6s5lZMRxLBvHYbvETLWLGcYz63Ysq56BqOO82KCPI8HawDS9mLxShuE8PVVKhUImW0WE71K+XYU8Awk+PMa3qPYMuQy5CMsrI2sPeqVbxMJAnNVF5m+RQs7WKpQ/Juelk724sY578eZVGzuOFXwg2/W+SzT8/y61UDJpZzTAbbuEU8gw2r42VxxXPGghUchfKY66pYLDoNBBMGHpbxYskjh+FWyZCT28qnKIgaZtmcCMrYwEovO86wNAnD/qiIoYjVl21lOSM+YE6qZdWMa+y66UlN9LIiwy48kWQRGTM/2j7/FZbDbr5V6eaD2A2K458AAwCJWDlL/sW9gAAAAABJRU5ErkJggg=="},5963:function(t,s,i){t.exports=i.p+"img/time.b407c705.png"}}]);
//# sourceMappingURL=317.79d276fd.js.map