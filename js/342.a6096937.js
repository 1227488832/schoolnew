(self["webpackChunkschoolactivities"]=self["webpackChunkschoolactivities"]||[]).push([[342],{7518:function(t,e,i){var o;i(9512),
/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */
function(n,s,r,a){"use strict";var h,l=["","webkit","Moz","MS","ms","o"],c=s.createElement("div"),p="function",u=Math.round,d=Math.abs,g=Date.now;function f(t,e,i){return setTimeout(b(t,i),e)}function m(t,e,i){return!!Array.isArray(t)&&(v(t,i[e],i),!0)}function v(t,e,i){var o;if(t)if(t.forEach)t.forEach(e,i);else if(t.length!==a){o=0;while(o<t.length)e.call(i,t[o],o,t),o++}else for(o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function x(t,e,i){var o="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=n.console&&(n.console.warn||n.console.log);return s&&s.call(n.console,o,i),t.apply(this,arguments)}}h="function"!==typeof Object.assign?function(t){if(t===a||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(o!==a&&null!==o)for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e}:Object.assign;var w=x((function(t,e,i){var o=Object.keys(e),n=0;while(n<o.length)(!i||i&&t[o[n]]===a)&&(t[o[n]]=e[o[n]]),n++;return t}),"extend","Use `assign`."),y=x((function(t,e){return w(t,e,!0)}),"merge","Use `assign`.");function C(t,e,i){var o,n=e.prototype;o=t.prototype=Object.create(n),o.constructor=t,o._super=n,i&&h(o,i)}function b(t,e){return function(){return t.apply(e,arguments)}}function I(t,e){return typeof t==p?t.apply(e&&e[0]||a,e):t}function B(t,e){return t===a?e:t}function T(t,e,i){v(E(e),(function(e){t.addEventListener(e,i,!1)}))}function M(t,e,i){v(E(e),(function(e){t.removeEventListener(e,i,!1)}))}function A(t,e){while(t){if(t==e)return!0;t=t.parentNode}return!1}function O(t,e){return t.indexOf(e)>-1}function E(t){return t.trim().split(/\s+/g)}function S(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);var o=0;while(o<t.length){if(i&&t[o][i]==e||!i&&t[o]===e)return o;o++}return-1}function _(t){return Array.prototype.slice.call(t,0)}function W(t,e,i){var o=[],n=[],s=0;while(s<t.length){var r=e?t[s][e]:t[s];S(n,r)<0&&o.push(t[s]),n[s]=r,s++}return i&&(o=e?o.sort((function(t,i){return t[e]>i[e]})):o.sort()),o}function k(t,e){var i,o,n=e[0].toUpperCase()+e.slice(1),s=0;while(s<l.length){if(i=l[s],o=i?i+n:e,o in t)return o;s++}return a}var Y=1;function H(){return Y++}function N(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||n}var X=/mobile|tablet|ip(ad|hone|od)|android/i,D="ontouchstart"in n,L=k(n,"PointerEvent")!==a,R=D&&X.test(navigator.userAgent),P="touch",U="pen",z="mouse",F="kinect",j=25,V=1,$=2,q=4,Z=8,G=1,J=2,Q=4,K=8,tt=16,et=J|Q,it=K|tt,ot=et|it,nt=["x","y"],st=["clientX","clientY"];function rt(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){I(t.options.enable,[t])&&i.handler(e)},this.init()}function at(t){var e,i=t.options.inputClass;return e=i||(L?Ot:R?Nt:D?Rt:It),new e(t,ht)}function ht(t,e,i){var o=i.pointers.length,n=i.changedPointers.length,s=e&V&&o-n===0,r=e&(q|Z)&&o-n===0;i.isFirst=!!s,i.isFinal=!!r,s&&(t.session={}),i.eventType=e,lt(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function lt(t,e){var i=t.session,o=e.pointers,n=o.length;i.firstInput||(i.firstInput=ut(e)),n>1&&!i.firstMultiple?i.firstMultiple=ut(e):1===n&&(i.firstMultiple=!1);var s=i.firstInput,r=i.firstMultiple,a=r?r.center:s.center,h=e.center=dt(o);e.timeStamp=g(),e.deltaTime=e.timeStamp-s.timeStamp,e.angle=vt(a,h),e.distance=mt(a,h),ct(i,e),e.offsetDirection=ft(e.deltaX,e.deltaY);var l=gt(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=l.x,e.overallVelocityY=l.y,e.overallVelocity=d(l.x)>d(l.y)?l.x:l.y,e.scale=r?wt(r.pointers,o):1,e.rotation=r?xt(r.pointers,o):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,pt(i,e);var c=t.element;A(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function ct(t,e){var i=e.center,o=t.offsetDelta||{},n=t.prevDelta||{},s=t.prevInput||{};e.eventType!==V&&s.eventType!==q||(n=t.prevDelta={x:s.deltaX||0,y:s.deltaY||0},o=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=n.x+(i.x-o.x),e.deltaY=n.y+(i.y-o.y)}function pt(t,e){var i,o,n,s,r=t.lastInterval||e,h=e.timeStamp-r.timeStamp;if(e.eventType!=Z&&(h>j||r.velocity===a)){var l=e.deltaX-r.deltaX,c=e.deltaY-r.deltaY,p=gt(h,l,c);o=p.x,n=p.y,i=d(p.x)>d(p.y)?p.x:p.y,s=ft(l,c),t.lastInterval=e}else i=r.velocity,o=r.velocityX,n=r.velocityY,s=r.direction;e.velocity=i,e.velocityX=o,e.velocityY=n,e.direction=s}function ut(t){var e=[],i=0;while(i<t.pointers.length)e[i]={clientX:u(t.pointers[i].clientX),clientY:u(t.pointers[i].clientY)},i++;return{timeStamp:g(),pointers:e,center:dt(e),deltaX:t.deltaX,deltaY:t.deltaY}}function dt(t){var e=t.length;if(1===e)return{x:u(t[0].clientX),y:u(t[0].clientY)};var i=0,o=0,n=0;while(n<e)i+=t[n].clientX,o+=t[n].clientY,n++;return{x:u(i/e),y:u(o/e)}}function gt(t,e,i){return{x:e/t||0,y:i/t||0}}function ft(t,e){return t===e?G:d(t)>=d(e)?t<0?J:Q:e<0?K:tt}function mt(t,e,i){i||(i=nt);var o=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return Math.sqrt(o*o+n*n)}function vt(t,e,i){i||(i=nt);var o=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return 180*Math.atan2(n,o)/Math.PI}function xt(t,e){return vt(e[1],e[0],st)+vt(t[1],t[0],st)}function wt(t,e){return mt(e[0],e[1],st)/mt(t[0],t[1],st)}rt.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(N(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&M(this.element,this.evEl,this.domHandler),this.evTarget&&M(this.target,this.evTarget,this.domHandler),this.evWin&&M(N(this.element),this.evWin,this.domHandler)}};var yt={mousedown:V,mousemove:$,mouseup:q},Ct="mousedown",bt="mousemove mouseup";function It(){this.evEl=Ct,this.evWin=bt,this.pressed=!1,rt.apply(this,arguments)}C(It,rt,{handler:function(t){var e=yt[t.type];e&V&&0===t.button&&(this.pressed=!0),e&$&&1!==t.which&&(e=q),this.pressed&&(e&q&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:z,srcEvent:t}))}});var Bt={pointerdown:V,pointermove:$,pointerup:q,pointercancel:Z,pointerout:Z},Tt={2:P,3:U,4:z,5:F},Mt="pointerdown",At="pointermove pointerup pointercancel";function Ot(){this.evEl=Mt,this.evWin=At,rt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}n.MSPointerEvent&&!n.PointerEvent&&(Mt="MSPointerDown",At="MSPointerMove MSPointerUp MSPointerCancel"),C(Ot,rt,{handler:function(t){var e=this.store,i=!1,o=t.type.toLowerCase().replace("ms",""),n=Bt[o],s=Tt[t.pointerType]||t.pointerType,r=s==P,a=S(e,t.pointerId,"pointerId");n&V&&(0===t.button||r)?a<0&&(e.push(t),a=e.length-1):n&(q|Z)&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:s,srcEvent:t}),i&&e.splice(a,1))}});var Et={touchstart:V,touchmove:$,touchend:q,touchcancel:Z},St="touchstart",_t="touchstart touchmove touchend touchcancel";function Wt(){this.evTarget=St,this.evWin=_t,this.started=!1,rt.apply(this,arguments)}function kt(t,e){var i=_(t.touches),o=_(t.changedTouches);return e&(q|Z)&&(i=W(i.concat(o),"identifier",!0)),[i,o]}C(Wt,rt,{handler:function(t){var e=Et[t.type];if(e===V&&(this.started=!0),this.started){var i=kt.call(this,t,e);e&(q|Z)&&i[0].length-i[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:P,srcEvent:t})}}});var Yt={touchstart:V,touchmove:$,touchend:q,touchcancel:Z},Ht="touchstart touchmove touchend touchcancel";function Nt(){this.evTarget=Ht,this.targetIds={},rt.apply(this,arguments)}function Xt(t,e){var i=_(t.touches),o=this.targetIds;if(e&(V|$)&&1===i.length)return o[i[0].identifier]=!0,[i,i];var n,s,r=_(t.changedTouches),a=[],h=this.target;if(s=i.filter((function(t){return A(t.target,h)})),e===V){n=0;while(n<s.length)o[s[n].identifier]=!0,n++}n=0;while(n<r.length)o[r[n].identifier]&&a.push(r[n]),e&(q|Z)&&delete o[r[n].identifier],n++;return a.length?[W(s.concat(a),"identifier",!0),a]:void 0}C(Nt,rt,{handler:function(t){var e=Yt[t.type],i=Xt.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:P,srcEvent:t})}});var Dt=2500,Lt=25;function Rt(){rt.apply(this,arguments);var t=b(this.handler,this);this.touch=new Nt(this.manager,t),this.mouse=new It(this.manager,t),this.primaryTouch=null,this.lastTouches=[]}function Pt(t,e){t&V?(this.primaryTouch=e.changedPointers[0].identifier,Ut.call(this,e)):t&(q|Z)&&Ut.call(this,e)}function Ut(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY};this.lastTouches.push(i);var o=this.lastTouches,n=function(){var t=o.indexOf(i);t>-1&&o.splice(t,1)};setTimeout(n,Dt)}}function zt(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,o=0;o<this.lastTouches.length;o++){var n=this.lastTouches[o],s=Math.abs(e-n.x),r=Math.abs(i-n.y);if(s<=Lt&&r<=Lt)return!0}return!1}C(Rt,rt,{handler:function(t,e,i){var o=i.pointerType==P,n=i.pointerType==z;if(!(n&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(o)Pt.call(this,e,i);else if(n&&zt.call(this,i))return;this.callback(t,e,i)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ft=k(c.style,"touchAction"),jt=Ft!==a,Vt="compute",$t="auto",qt="manipulation",Zt="none",Gt="pan-x",Jt="pan-y",Qt=ee();function Kt(t,e){this.manager=t,this.set(e)}function te(t){if(O(t,Zt))return Zt;var e=O(t,Gt),i=O(t,Jt);return e&&i?Zt:e||i?e?Gt:Jt:O(t,qt)?qt:$t}function ee(){if(!jt)return!1;var t={},e=n.CSS&&n.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){t[i]=!e||n.CSS.supports("touch-action",i)})),t}Kt.prototype={set:function(t){t==Vt&&(t=this.compute()),jt&&this.manager.element.style&&Qt[t]&&(this.manager.element.style[Ft]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return v(this.manager.recognizers,(function(e){I(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),te(t.join(" "))},preventDefaults:function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var o=this.actions,n=O(o,Zt)&&!Qt[Zt],s=O(o,Jt)&&!Qt[Jt],r=O(o,Gt)&&!Qt[Gt];if(n){var a=1===t.pointers.length,h=t.distance<2,l=t.deltaTime<250;if(a&&h&&l)return}if(!r||!s)return n||s&&i&et||r&&i&it?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var ie=1,oe=2,ne=4,se=8,re=se,ae=16,he=32;function le(t){this.options=h({},this.defaults,t||{}),this.id=H(),this.manager=null,this.options.enable=B(this.options.enable,!0),this.state=ie,this.simultaneous={},this.requireFail=[]}function ce(t){return t&ae?"cancel":t&se?"end":t&ne?"move":t&oe?"start":""}function pe(t){return t==tt?"down":t==K?"up":t==J?"left":t==Q?"right":""}function ue(t,e){var i=e.manager;return i?i.get(t):t}function de(){le.apply(this,arguments)}function ge(){de.apply(this,arguments),this.pX=null,this.pY=null}function fe(){de.apply(this,arguments)}function me(){le.apply(this,arguments),this._timer=null,this._input=null}function ve(){de.apply(this,arguments)}function xe(){de.apply(this,arguments)}function we(){le.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ye(t,e){return e=e||{},e.recognizers=B(e.recognizers,ye.defaults.preset),new Ie(t,e)}le.prototype={defaults:{},set:function(t){return h(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(m(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=ue(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return m(t,"dropRecognizeWith",this)||(t=ue(t,this),delete this.simultaneous[t.id]),this},requireFailure:function(t){if(m(t,"requireFailure",this))return this;var e=this.requireFail;return t=ue(t,this),-1===S(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(m(t,"dropRequireFailure",this))return this;t=ue(t,this);var e=S(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){var e=this,i=this.state;function o(i){e.manager.emit(i,t)}i<se&&o(e.options.event+ce(i)),o(e.options.event),t.additionalEvent&&o(t.additionalEvent),i>=se&&o(e.options.event+ce(i))},tryEmit:function(t){if(this.canEmit())return this.emit(t);this.state=he},canEmit:function(){var t=0;while(t<this.requireFail.length){if(!(this.requireFail[t].state&(he|ie)))return!1;t++}return!0},recognize:function(t){var e=h({},t);if(!I(this.options.enable,[this,e]))return this.reset(),void(this.state=he);this.state&(re|ae|he)&&(this.state=ie),this.state=this.process(e),this.state&(oe|ne|se|ae)&&this.tryEmit(e)},process:function(t){},getTouchAction:function(){},reset:function(){}},C(de,le,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,i=t.eventType,o=e&(oe|ne),n=this.attrTest(t);return o&&(i&Z||!n)?e|ae:o||n?i&q?e|se:e&oe?e|ne:oe:he}}),C(ge,de,{defaults:{event:"pan",threshold:10,pointers:1,direction:ot},getTouchAction:function(){var t=this.options.direction,e=[];return t&et&&e.push(Jt),t&it&&e.push(Gt),e},directionTest:function(t){var e=this.options,i=!0,o=t.distance,n=t.direction,s=t.deltaX,r=t.deltaY;return n&e.direction||(e.direction&et?(n=0===s?G:s<0?J:Q,i=s!=this.pX,o=Math.abs(t.deltaX)):(n=0===r?G:r<0?K:tt,i=r!=this.pY,o=Math.abs(t.deltaY))),t.direction=n,i&&o>e.threshold&&n&e.direction},attrTest:function(t){return de.prototype.attrTest.call(this,t)&&(this.state&oe||!(this.state&oe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=pe(t.direction);e&&(t.additionalEvent=this.options.event+e),this._super.emit.call(this,t)}}),C(fe,de,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Zt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&oe)},emit:function(t){if(1!==t.scale){var e=t.scale<1?"in":"out";t.additionalEvent=this.options.event+e}this._super.emit.call(this,t)}}),C(me,le,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[$t]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,o=t.distance<e.threshold,n=t.deltaTime>e.time;if(this._input=t,!o||!i||t.eventType&(q|Z)&&!n)this.reset();else if(t.eventType&V)this.reset(),this._timer=f((function(){this.state=re,this.tryEmit()}),e.time,this);else if(t.eventType&q)return re;return he},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===re&&(t&&t.eventType&q?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=g(),this.manager.emit(this.options.event,this._input)))}}),C(ve,de,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Zt]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&oe)}}),C(xe,de,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:et|it,pointers:1},getTouchAction:function(){return ge.prototype.getTouchAction.call(this)},attrTest:function(t){var e,i=this.options.direction;return i&(et|it)?e=t.overallVelocity:i&et?e=t.overallVelocityX:i&it&&(e=t.overallVelocityY),this._super.attrTest.call(this,t)&&i&t.offsetDirection&&t.distance>this.options.threshold&&t.maxPointers==this.options.pointers&&d(e)>this.options.velocity&&t.eventType&q},emit:function(t){var e=pe(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),C(we,le,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[qt]},process:function(t){var e=this.options,i=t.pointers.length===e.pointers,o=t.distance<e.threshold,n=t.deltaTime<e.time;if(this.reset(),t.eventType&V&&0===this.count)return this.failTimeout();if(o&&n&&i){if(t.eventType!=q)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<e.interval,r=!this.pCenter||mt(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,r&&s?this.count+=1:this.count=1,this._input=t;var a=this.count%e.taps;if(0===a)return this.hasRequireFailures()?(this._timer=f((function(){this.state=re,this.tryEmit()}),e.interval,this),oe):re}return he},failTimeout:function(){return this._timer=f((function(){this.state=he}),this.options.interval,this),he},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==re&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ye.VERSION="2.0.7",ye.defaults={domEvents:!1,touchAction:Vt,enable:!0,inputTarget:null,inputClass:null,preset:[[ve,{enable:!1}],[fe,{enable:!1},["rotate"]],[xe,{direction:et}],[ge,{direction:et},["swipe"]],[we],[we,{event:"doubletap",taps:2},["tap"]],[me]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Ce=1,be=2;function Ie(t,e){this.options=h({},ye.defaults,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=at(this),this.touchAction=new Kt(this,this.options.touchAction),Be(this,!0),v(this.options.recognizers,(function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}function Be(t,e){var i,o=t.element;o.style&&(v(t.options.cssProps,(function(n,s){i=k(o.style,s),e?(t.oldCssProps[i]=o.style[i],o.style[i]=n):o.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}function Te(t,e){var i=s.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}Ie.prototype={set:function(t){return h(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?be:Ce},recognize:function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var o=this.recognizers,n=e.curRecognizer;(!n||n&&n.state&re)&&(n=e.curRecognizer=null);var s=0;while(s<o.length)i=o[s],e.stopped===be||n&&i!=n&&!i.canRecognizeWith(n)?i.reset():i.recognize(t),!n&&i.state&(oe|ne|se)&&(n=e.curRecognizer=i),s++}},get:function(t){if(t instanceof le)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event==t)return e[i];return null},add:function(t){if(m(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(m(t,"remove",this))return this;if(t=this.get(t),t){var e=this.recognizers,i=S(e,t);-1!==i&&(e.splice(i,1),this.touchAction.update())}return this},on:function(t,e){if(t!==a&&e!==a){var i=this.handlers;return v(E(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this}},off:function(t,e){if(t!==a){var i=this.handlers;return v(E(t),(function(t){e?i[t]&&i[t].splice(S(i[t],e),1):delete i[t]})),this}},emit:function(t,e){this.options.domEvents&&Te(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};var o=0;while(o<i.length)i[o](e),o++}},destroy:function(){this.element&&Be(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},h(ye,{INPUT_START:V,INPUT_MOVE:$,INPUT_END:q,INPUT_CANCEL:Z,STATE_POSSIBLE:ie,STATE_BEGAN:oe,STATE_CHANGED:ne,STATE_ENDED:se,STATE_RECOGNIZED:re,STATE_CANCELLED:ae,STATE_FAILED:he,DIRECTION_NONE:G,DIRECTION_LEFT:J,DIRECTION_RIGHT:Q,DIRECTION_UP:K,DIRECTION_DOWN:tt,DIRECTION_HORIZONTAL:et,DIRECTION_VERTICAL:it,DIRECTION_ALL:ot,Manager:Ie,Input:rt,TouchAction:Kt,TouchInput:Nt,MouseInput:It,PointerEventInput:Ot,TouchMouseInput:Rt,SingleTouchInput:Wt,Recognizer:le,AttrRecognizer:de,Tap:we,Pan:ge,Swipe:xe,Pinch:fe,Rotate:ve,Press:me,on:T,off:M,each:v,merge:y,extend:w,assign:h,inherit:C,bindFn:b,prefixed:k});var Me="undefined"!==typeof n?n:"undefined"!==typeof self?self:{};Me.Hammer=ye,o=function(){return ye}.call(e,i,e,t),o===a||(t.exports=o)}(window,document)},8578:function(t,e,i){i(9512),i(7788),i(1952),i(4605),function(e,i){t.exports=i()}(window,(function(){return function(t){var e={};function i(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(o,n,function(e){return t[e]}.bind(null,n));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=6)}([function(t,e,i){var o=i(2);"string"==typeof o&&(o=[[t.i,o,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};i(4)(o,n),o.locals&&(t.exports=o.locals)},function(t,e,i){"use strict";var o=i(0);i.n(o).a},function(t,e,i){(t.exports=i(3)(!1)).push([t.i,'\n.vue-cropper[data-v-6dae58fd] {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  user-select: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  direction: ltr;\n  touch-action: none;\n  text-align: left;\n  background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC");\n}\n.cropper-box[data-v-6dae58fd],\n.cropper-box-canvas[data-v-6dae58fd],\n.cropper-drag-box[data-v-6dae58fd],\n.cropper-crop-box[data-v-6dae58fd],\n.cropper-face[data-v-6dae58fd] {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  user-select: none;\n}\n.cropper-box-canvas img[data-v-6dae58fd] {\n  position: relative;\n  text-align: left;\n  user-select: none;\n  transform: none;\n  max-width: none;\n  max-height: none;\n}\n.cropper-box[data-v-6dae58fd] {\n  overflow: hidden;\n}\n.cropper-move[data-v-6dae58fd] {\n  cursor: move;\n}\n.cropper-crop[data-v-6dae58fd] {\n  cursor: crosshair;\n}\n.cropper-modal[data-v-6dae58fd] {\n  background: rgba(0, 0, 0, 0.5);\n}\n.cropper-crop-box[data-v-6dae58fd] {\n  /*border: 2px solid #39f;*/\n}\n.cropper-view-box[data-v-6dae58fd] {\n  display: block;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  outline: 1px solid #39f;\n  outline-color: rgba(51, 153, 255, 0.75);\n  user-select: none;\n}\n.cropper-view-box img[data-v-6dae58fd] {\n  user-select: none;\n  text-align: left;\n  max-width: none;\n  max-height: none;\n}\n.cropper-face[data-v-6dae58fd] {\n  top: 0;\n  left: 0;\n  background-color: #fff;\n  opacity: 0.1;\n}\n.crop-info[data-v-6dae58fd] {\n  position: absolute;\n  left: 0px;\n  min-width: 65px;\n  text-align: center;\n  color: white;\n  line-height: 20px;\n  background-color: rgba(0, 0, 0, 0.8);\n  font-size: 12px;\n}\n.crop-line[data-v-6dae58fd] {\n  position: absolute;\n  display: block;\n  width: 100%;\n  height: 100%;\n  opacity: 0.1;\n}\n.line-w[data-v-6dae58fd] {\n  top: -3px;\n  left: 0;\n  height: 5px;\n  cursor: n-resize;\n}\n.line-a[data-v-6dae58fd] {\n  top: 0;\n  left: -3px;\n  width: 5px;\n  cursor: w-resize;\n}\n.line-s[data-v-6dae58fd] {\n  bottom: -3px;\n  left: 0;\n  height: 5px;\n  cursor: s-resize;\n}\n.line-d[data-v-6dae58fd] {\n  top: 0;\n  right: -3px;\n  width: 5px;\n  cursor: e-resize;\n}\n.crop-point[data-v-6dae58fd] {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  opacity: 0.75;\n  background-color: #39f;\n  border-radius: 100%;\n}\n.point1[data-v-6dae58fd] {\n  top: -4px;\n  left: -4px;\n  cursor: nw-resize;\n}\n.point2[data-v-6dae58fd] {\n  top: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: n-resize;\n}\n.point3[data-v-6dae58fd] {\n  top: -4px;\n  right: -4px;\n  cursor: ne-resize;\n}\n.point4[data-v-6dae58fd] {\n  top: 50%;\n  left: -4px;\n  margin-top: -3px;\n  cursor: w-resize;\n}\n.point5[data-v-6dae58fd] {\n  top: 50%;\n  right: -4px;\n  margin-top: -3px;\n  cursor: e-resize;\n}\n.point6[data-v-6dae58fd] {\n  bottom: -5px;\n  left: -4px;\n  cursor: sw-resize;\n}\n.point7[data-v-6dae58fd] {\n  bottom: -5px;\n  left: 50%;\n  margin-left: -3px;\n  cursor: s-resize;\n}\n.point8[data-v-6dae58fd] {\n  bottom: -5px;\n  right: -4px;\n  cursor: se-resize;\n}\n@media screen and (max-width: 500px) {\n.crop-point[data-v-6dae58fd] {\n    position: absolute;\n    width: 20px;\n    height: 20px;\n    opacity: 0.45;\n    background-color: #39f;\n    border-radius: 100%;\n}\n.point1[data-v-6dae58fd] {\n    top: -10px;\n    left: -10px;\n}\n.point2[data-v-6dae58fd],\n  .point4[data-v-6dae58fd],\n  .point5[data-v-6dae58fd],\n  .point7[data-v-6dae58fd] {\n    display: none;\n}\n.point3[data-v-6dae58fd] {\n    top: -10px;\n    right: -10px;\n}\n.point4[data-v-6dae58fd] {\n    top: 0;\n    left: 0;\n}\n.point6[data-v-6dae58fd] {\n    bottom: -10px;\n    left: -10px;\n}\n.point8[data-v-6dae58fd] {\n    bottom: -10px;\n    right: -10px;\n}\n}\n',""])},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i=function(t,e){var i=t[1]||"",o=t[3];if(!o)return i;if(e&&"function"==typeof btoa){var n=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(o),s=o.sources.map((function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"}));return[i].concat(s).concat([n]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i})).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},n=0;n<this.length;n++){var s=this[n][0];"number"==typeof s&&(o[s]=!0)}for(n=0;n<t.length;n++){var r=t[n];"number"==typeof r[0]&&o[r[0]]||(i&&!r[2]?r[2]=i:i&&(r[2]="("+r[2]+") and ("+i+")"),e.push(r))}},e}},function(t,e,i){var o={},n=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}((function(){return window&&document&&document.all&&!window.atob})),s=function(t){var e={};return function(t,i){if("function"==typeof t)return t();if(void 0===e[t]){var o=function(t,e){return e?e.querySelector(t):document.querySelector(t)}.call(this,t,i);if(window.HTMLIFrameElement&&o instanceof window.HTMLIFrameElement)try{o=o.contentDocument.head}catch(t){o=null}e[t]=o}return e[t]}}(),r=null,a=0,h=[],l=i(5);function c(t,e){for(var i=0;i<t.length;i++){var n=t[i],s=o[n.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](n.parts[r]);for(;r<n.parts.length;r++)s.parts.push(m(n.parts[r],e))}else{var a=[];for(r=0;r<n.parts.length;r++)a.push(m(n.parts[r],e));o[n.id]={id:n.id,refs:1,parts:a}}}}function p(t,e){for(var i=[],o={},n=0;n<t.length;n++){var s=t[n],r=e.base?s[0]+e.base:s[0],a={css:s[1],media:s[2],sourceMap:s[3]};o[r]?o[r].parts.push(a):i.push(o[r]={id:r,parts:[a]})}return i}function u(t,e){var i=s(t.insertInto);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=h[h.length-1];if("top"===t.insertAt)o?o.nextSibling?i.insertBefore(e,o.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),h.push(e);else if("bottom"===t.insertAt)i.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var n=s(t.insertAt.before,i);i.insertBefore(e,n)}}function d(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=h.indexOf(t);e>=0&&h.splice(e,1)}function g(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var o=function(){return i.nc}();o&&(t.attrs.nonce=o)}return f(e,t.attrs),u(t,e),e}function f(t,e){Object.keys(e).forEach((function(i){t.setAttribute(i,e[i])}))}function m(t,e){var i,o,n,s;if(e.transform&&t.css){if(!(s="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=s}if(e.singleton){var h=a++;i=r||(r=g(e)),o=x.bind(null,i,h,!1),n=x.bind(null,i,h,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",f(e,t.attrs),u(t,e),e}(e),o=function(t,e,i){var o=i.css,n=i.sourceMap,s=void 0===e.convertToAbsoluteUrls&&n;(e.convertToAbsoluteUrls||s)&&(o=l(o)),n&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var r=new Blob([o],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(r),a&&URL.revokeObjectURL(a)}.bind(null,i,e),n=function(){d(i),i.href&&URL.revokeObjectURL(i.href)}):(i=g(e),o=function(t,e){var i=e.css,o=e.media;if(o&&t.setAttribute("media",o),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,i),n=function(){d(i)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else n()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=n()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var i=p(t,e);return c(i,e),function(t){for(var n=[],s=0;s<i.length;s++){var r=i[s];(a=o[r.id]).refs--,n.push(a)}for(t&&c(p(t,e),e),s=0;s<n.length;s++){var a;if(0===(a=n[s]).refs){for(var h=0;h<a.parts.length;h++)a.parts[h]();delete o[a.id]}}}};var v=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}();function x(t,e,i,o){var n=i?"":o.css;if(t.styleSheet)t.styleSheet.cssText=v(e,n);else{var s=document.createTextNode(n),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(s,r[e]):t.appendChild(s)}}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var i=e.protocol+"//"+e.host,o=i+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var n,s=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?t:(n=0===s.indexOf("//")?s:0===s.indexOf("/")?i+s:o+s.replace(/^\.\//,""),"url("+JSON.stringify(n)+")")}))}},function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"cropper",staticClass:"vue-cropper",on:{mouseover:t.scaleImg,mouseout:t.cancelScale}},[t.imgs?i("div",{staticClass:"cropper-box"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"cropper-box-canvas",style:{width:t.trueWidth+"px",height:t.trueHeight+"px",transform:"scale("+t.scale+","+t.scale+") translate3d("+t.x/t.scale+"px,"+t.y/t.scale+"px,0)rotateZ("+90*t.rotate+"deg)"}},[i("img",{ref:"cropperImg",attrs:{src:t.imgs,alt:"cropper-img"}})])]):t._e(),t._v(" "),i("div",{staticClass:"cropper-drag-box",class:{"cropper-move":t.move&&!t.crop,"cropper-crop":t.crop,"cropper-modal":t.cropping},on:{mousedown:t.startMove,touchstart:t.startMove}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.cropping,expression:"cropping"}],staticClass:"cropper-crop-box",style:{width:t.cropW+"px",height:t.cropH+"px",transform:"translate3d("+t.cropOffsertX+"px,"+t.cropOffsertY+"px,0)"}},[i("span",{staticClass:"cropper-view-box"},[i("img",{style:{width:t.trueWidth+"px",height:t.trueHeight+"px",transform:"scale("+t.scale+","+t.scale+") translate3d("+(t.x-t.cropOffsertX)/t.scale+"px,"+(t.y-t.cropOffsertY)/t.scale+"px,0)rotateZ("+90*t.rotate+"deg)"},attrs:{src:t.imgs,alt:"cropper-img"}})]),t._v(" "),i("span",{staticClass:"cropper-face cropper-move",on:{mousedown:t.cropMove,touchstart:t.cropMove}}),t._v(" "),t.info?i("span",{staticClass:"crop-info",style:{top:t.cropInfo.top}},[t._v(t._s(t.cropInfo.width)+" × "+t._s(t.cropInfo.height))]):t._e(),t._v(" "),t.fixedBox?t._e():i("span",[i("span",{staticClass:"crop-line line-w",on:{mousedown:function(e){t.changeCropSize(e,!1,!0,0,1)},touchstart:function(e){t.changeCropSize(e,!1,!0,0,1)}}}),t._v(" "),i("span",{staticClass:"crop-line line-a",on:{mousedown:function(e){t.changeCropSize(e,!0,!1,1,0)},touchstart:function(e){t.changeCropSize(e,!0,!1,1,0)}}}),t._v(" "),i("span",{staticClass:"crop-line line-s",on:{mousedown:function(e){t.changeCropSize(e,!1,!0,0,2)},touchstart:function(e){t.changeCropSize(e,!1,!0,0,2)}}}),t._v(" "),i("span",{staticClass:"crop-line line-d",on:{mousedown:function(e){t.changeCropSize(e,!0,!1,2,0)},touchstart:function(e){t.changeCropSize(e,!0,!1,2,0)}}}),t._v(" "),i("span",{staticClass:"crop-point point1",on:{mousedown:function(e){t.changeCropSize(e,!0,!0,1,1)},touchstart:function(e){t.changeCropSize(e,!0,!0,1,1)}}}),t._v(" "),i("span",{staticClass:"crop-point point2",on:{mousedown:function(e){t.changeCropSize(e,!1,!0,0,1)},touchstart:function(e){t.changeCropSize(e,!1,!0,0,1)}}}),t._v(" "),i("span",{staticClass:"crop-point point3",on:{mousedown:function(e){t.changeCropSize(e,!0,!0,2,1)},touchstart:function(e){t.changeCropSize(e,!0,!0,2,1)}}}),t._v(" "),i("span",{staticClass:"crop-point point4",on:{mousedown:function(e){t.changeCropSize(e,!0,!1,1,0)},touchstart:function(e){t.changeCropSize(e,!0,!1,1,0)}}}),t._v(" "),i("span",{staticClass:"crop-point point5",on:{mousedown:function(e){t.changeCropSize(e,!0,!1,2,0)},touchstart:function(e){t.changeCropSize(e,!0,!1,2,0)}}}),t._v(" "),i("span",{staticClass:"crop-point point6",on:{mousedown:function(e){t.changeCropSize(e,!0,!0,1,2)},touchstart:function(e){t.changeCropSize(e,!0,!0,1,2)}}}),t._v(" "),i("span",{staticClass:"crop-point point7",on:{mousedown:function(e){t.changeCropSize(e,!1,!0,0,2)},touchstart:function(e){t.changeCropSize(e,!1,!0,0,2)}}}),t._v(" "),i("span",{staticClass:"crop-point point8",on:{mousedown:function(e){t.changeCropSize(e,!0,!0,2,2)},touchstart:function(e){t.changeCropSize(e,!0,!0,2,2)}}})])])])};o._withStripped=!0;var n={getData:function(t){return new Promise((function(e,i){var o={};(function(t){var e=null;return new Promise((function(i,o){if(t.src)if(/^data\:/i.test(t.src))e=function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,o=new ArrayBuffer(i),n=new Uint8Array(o),s=0;s<i;s++)n[s]=e.charCodeAt(s);return o}(t.src),i(e);else if(/^blob\:/i.test(t.src)){var n=new FileReader;n.onload=function(t){e=t.target.result,i(e)},function(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.responseType="blob",i.onload=function(t){200!=this.status&&0!==this.status||e(this.response)},i.send()}(t.src,(function(t){n.readAsArrayBuffer(t)}))}else{var s=new XMLHttpRequest;s.onload=function(){if(200!=this.status&&0!==this.status)throw"Could not load image";e=s.response,i(e),s=null},s.open("GET",t.src,!0),s.responseType="arraybuffer",s.send(null)}else o("img error")}))})(t).then((function(t){o.arrayBuffer=t,o.orientation=function(t){var e,i,o,n,s,r,a,h,l,c=new DataView(t),p=c.byteLength;if(255===c.getUint8(0)&&216===c.getUint8(1))for(h=2;h<p;){if(255===c.getUint8(h)&&225===c.getUint8(h+1)){r=h;break}h++}if(r&&(i=r+10,"Exif"===function(t,e,i){var o,n="";for(o=e,i+=e;o<i;o++)n+=String.fromCharCode(t.getUint8(o));return n}(c,r+4,4)&&(s=c.getUint16(i),((n=18761===s)||19789===s)&&42===c.getUint16(i+2,n)&&(o=c.getUint32(i+4,n))>=8&&(a=i+o))),a)for(p=c.getUint16(a,n),l=0;l<p;l++)if(h=a+12*l+2,274===c.getUint16(h,n)){h+=8,e=c.getUint16(h,n);break}return e}(t),e(o)})).catch((function(t){i(t)}))}))}},s=n,r={data:function(){return{w:0,h:0,scale:1,x:0,y:0,loading:!0,trueWidth:0,trueHeight:0,move:!0,moveX:0,moveY:0,crop:!1,cropping:!1,cropW:0,cropH:0,cropOldW:0,cropOldH:0,canChangeX:!1,canChangeY:!1,changeCropTypeX:1,changeCropTypeY:1,cropX:0,cropY:0,cropChangeX:0,cropChangeY:0,cropOffsertX:0,cropOffsertY:0,support:"",touches:[],touchNow:!1,rotate:0,isIos:!1,orientation:0,imgs:"",coe:.2,scaling:!1,scalingSet:"",coeStatus:"",isCanShow:!0}},props:{img:{type:[String,Blob,null,File],default:""},outputSize:{type:Number,default:1},outputType:{type:String,default:"jpeg"},info:{type:Boolean,default:!0},canScale:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!1},autoCropWidth:{type:[Number,String],default:0},autoCropHeight:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},fixedNumber:{type:Array,default:function(){return[1,1]}},fixedBox:{type:Boolean,default:!1},full:{type:Boolean,default:!1},canMove:{type:Boolean,default:!0},canMoveBox:{type:Boolean,default:!0},original:{type:Boolean,default:!1},centerBox:{type:Boolean,default:!1},high:{type:Boolean,default:!0},infoTrue:{type:Boolean,default:!1},maxImgSize:{type:[Number,String],default:2e3},enlarge:{type:[Number,String],default:1},preW:{type:[Number,String],default:0},mode:{type:String,default:"contain"},limitMinSize:{type:[Number,Array,String],default:function(){return 10}}},computed:{cropInfo:function(){var t={};if(t.top=this.cropOffsertY>21?"-21px":"0px",t.width=this.cropW>0?this.cropW:0,t.height=this.cropH>0?this.cropH:0,this.infoTrue){var e=1;this.high&&!this.full&&(e=window.devicePixelRatio),1!==this.enlarge&!this.full&&(e=Math.abs(Number(this.enlarge))),t.width=t.width*e,t.height=t.height*e,this.full&&(t.width=t.width/this.scale,t.height=t.height/this.scale)}return t.width=t.width.toFixed(0),t.height=t.height.toFixed(0),t},isIE:function(){navigator.userAgent;var t=!!window.ActiveXObject||"ActiveXObject"in window;return t},passive:function(){return this.isIE?null:{passive:!1}}},watch:{img:function(){this.checkedImg()},imgs:function(t){""!==t&&this.reload()},cropW:function(){this.showPreview()},cropH:function(){this.showPreview()},cropOffsertX:function(){this.showPreview()},cropOffsertY:function(){this.showPreview()},scale:function(t,e){this.showPreview()},x:function(){this.showPreview()},y:function(){this.showPreview()},autoCrop:function(t){t&&this.goAutoCrop()},autoCropWidth:function(){this.autoCrop&&this.goAutoCrop()},autoCropHeight:function(){this.autoCrop&&this.goAutoCrop()},mode:function(){this.checkedImg()},rotate:function(){this.showPreview(),(this.autoCrop||this.cropW>0||this.cropH>0)&&this.goAutoCrop(this.cropW,this.cropH)}},methods:{getVersion:function(t){for(var e=navigator.userAgent.split(" "),i="",o=new RegExp(t,"i"),n=0;n<e.length;n++)o.test(e[n])&&(i=e[n]);return i?i.split("/")[1].split("."):["0","0","0"]},checkOrientationImage:function(t,e,i,o){var n=this;if(this.getVersion("chrome")[0]>=81)e=-1;else if(this.getVersion("safari")[0]>=605){var s=this.getVersion("version");s[0]>13&&s[1]>1&&(e=-1)}else{var r=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);if(r){var a=r[1];((a=a.split("_"))[0]>13||a[0]>=13&&a[1]>=4)&&(e=-1)}}var h=document.createElement("canvas"),l=h.getContext("2d");switch(l.save(),e){case 2:h.width=i,h.height=o,l.translate(i,0),l.scale(-1,1);break;case 3:h.width=i,h.height=o,l.translate(i/2,o/2),l.rotate(180*Math.PI/180),l.translate(-i/2,-o/2);break;case 4:h.width=i,h.height=o,l.translate(0,o),l.scale(1,-1);break;case 5:h.height=i,h.width=o,l.rotate(.5*Math.PI),l.scale(1,-1);break;case 6:h.width=o,h.height=i,l.translate(o/2,i/2),l.rotate(90*Math.PI/180),l.translate(-i/2,-o/2);break;case 7:h.height=i,h.width=o,l.rotate(.5*Math.PI),l.translate(i,-o),l.scale(-1,1);break;case 8:h.height=i,h.width=o,l.translate(o/2,i/2),l.rotate(-90*Math.PI/180),l.translate(-i/2,-o/2);break;default:h.width=i,h.height=o}l.drawImage(t,0,0,i,o),l.restore(),h.toBlob((function(t){var e=URL.createObjectURL(t);URL.revokeObjectURL(n.imgs),n.imgs=e}),"image/"+this.outputType,1)},checkedImg:function(){var t=this;if(null===this.img||""===this.img)return this.imgs="",void this.clearCrop();this.loading=!0,this.scale=1,this.rotate=0,this.clearCrop();var e=new Image;if(e.onload=function(){if(""===t.img)return t.$emit("imgLoad","error"),t.$emit("img-load","error"),!1;var i=e.width,o=e.height;s.getData(e).then((function(n){t.orientation=n.orientation||1;var s=Number(t.maxImgSize);!t.orientation&&i<s&o<s?t.imgs=t.img:(i>s&&(o=o/i*s,i=s),o>s&&(i=i/o*s,o=s),t.checkOrientationImage(e,t.orientation,i,o))}))},e.onerror=function(){t.$emit("imgLoad","error"),t.$emit("img-load","error")},"data"!==this.img.substr(0,4)&&(e.crossOrigin=""),this.isIE){var i=new XMLHttpRequest;i.onload=function(){var t=URL.createObjectURL(this.response);e.src=t},i.open("GET",this.img,!0),i.responseType="blob",i.send()}else e.src=this.img},startMove:function(t){if(t.preventDefault(),this.move&&!this.crop){if(!this.canMove)return!1;this.moveX=("clientX"in t?t.clientX:t.touches[0].clientX)-this.x,this.moveY=("clientY"in t?t.clientY:t.touches[0].clientY)-this.y,t.touches?(window.addEventListener("touchmove",this.moveImg),window.addEventListener("touchend",this.leaveImg),2==t.touches.length&&(this.touches=t.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale))):(window.addEventListener("mousemove",this.moveImg),window.addEventListener("mouseup",this.leaveImg)),this.$emit("imgMoving",{moving:!0,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})}else this.cropping=!0,window.addEventListener("mousemove",this.createCrop),window.addEventListener("mouseup",this.endCrop),window.addEventListener("touchmove",this.createCrop),window.addEventListener("touchend",this.endCrop),this.cropOffsertX=t.offsetX?t.offsetX:t.touches[0].pageX-this.$refs.cropper.offsetLeft,this.cropOffsertY=t.offsetY?t.offsetY:t.touches[0].pageY-this.$refs.cropper.offsetTop,this.cropX="clientX"in t?t.clientX:t.touches[0].clientX,this.cropY="clientY"in t?t.clientY:t.touches[0].clientY,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.cropW=0,this.cropH=0},touchScale:function(t){var e=this;t.preventDefault();var i=this.scale,o=this.touches[0].clientX,n=this.touches[0].clientY,s=t.touches[0].clientX,r=t.touches[0].clientY,a=this.touches[1].clientX,h=this.touches[1].clientY,l=t.touches[1].clientX,c=t.touches[1].clientY,p=Math.sqrt(Math.pow(o-a,2)+Math.pow(n-h,2)),u=Math.sqrt(Math.pow(s-l,2)+Math.pow(r-c,2))-p,d=1,g=(d=(d=d/this.trueWidth>d/this.trueHeight?d/this.trueHeight:d/this.trueWidth)>.1?.1:d)*u;if(!this.touchNow){if(this.touchNow=!0,u>0?i+=Math.abs(g):u<0&&i>Math.abs(g)&&(i-=Math.abs(g)),this.touches=t.touches,setTimeout((function(){e.touchNow=!1}),8),!this.checkoutImgAxis(this.x,this.y,i))return!1;this.scale=i}},cancelTouchScale:function(t){window.removeEventListener("touchmove",this.touchScale)},moveImg:function(t){var e=this;if(t.preventDefault(),t.touches&&2===t.touches.length)return this.touches=t.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale),window.removeEventListener("touchmove",this.moveImg),!1;var i,o,n="clientX"in t?t.clientX:t.touches[0].clientX,s="clientY"in t?t.clientY:t.touches[0].clientY;i=n-this.moveX,o=s-this.moveY,this.$nextTick((function(){if(e.centerBox){var t,n,s,r,a=e.getImgAxis(i,o,e.scale),h=e.getCropAxis(),l=e.trueHeight*e.scale,c=e.trueWidth*e.scale;switch(e.rotate){case 1:case-1:case 3:case-3:t=e.cropOffsertX-e.trueWidth*(1-e.scale)/2+(l-c)/2,n=e.cropOffsertY-e.trueHeight*(1-e.scale)/2+(c-l)/2,s=t-l+e.cropW,r=n-c+e.cropH;break;default:t=e.cropOffsertX-e.trueWidth*(1-e.scale)/2,n=e.cropOffsertY-e.trueHeight*(1-e.scale)/2,s=t-c+e.cropW,r=n-l+e.cropH}a.x1>=h.x1&&(i=t),a.y1>=h.y1&&(o=n),a.x2<=h.x2&&(i=s),a.y2<=h.y2&&(o=r)}e.x=i,e.y=o,e.$emit("imgMoving",{moving:!0,axis:e.getImgAxis()}),e.$emit("img-moving",{moving:!0,axis:e.getImgAxis()})}))},leaveImg:function(t){window.removeEventListener("mousemove",this.moveImg),window.removeEventListener("touchmove",this.moveImg),window.removeEventListener("mouseup",this.leaveImg),window.removeEventListener("touchend",this.leaveImg),this.$emit("imgMoving",{moving:!1,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!1,axis:this.getImgAxis()})},scaleImg:function(){this.canScale&&window.addEventListener(this.support,this.changeSize,this.passive)},cancelScale:function(){this.canScale&&window.removeEventListener(this.support,this.changeSize)},changeSize:function(t){var e=this;t.preventDefault();var i=this.scale,o=t.deltaY||t.wheelDelta;o=navigator.userAgent.indexOf("Firefox")>0?30*o:o,this.isIE&&(o=-o);var n=this.coe,s=(n=n/this.trueWidth>n/this.trueHeight?n/this.trueHeight:n/this.trueWidth)*o;s<0?i+=Math.abs(s):i>Math.abs(s)&&(i-=Math.abs(s));var r=s<0?"add":"reduce";if(r!==this.coeStatus&&(this.coeStatus=r,this.coe=.2),this.scaling||(this.scalingSet=setTimeout((function(){e.scaling=!1,e.coe=e.coe+=.01}),50)),this.scaling=!0,!this.checkoutImgAxis(this.x,this.y,i))return!1;this.scale=i},changeScale:function(t){var e=this.scale;t=t||1;var i=20;if((t*=i=i/this.trueWidth>i/this.trueHeight?i/this.trueHeight:i/this.trueWidth)>0?e+=Math.abs(t):e>Math.abs(t)&&(e-=Math.abs(t)),!this.checkoutImgAxis(this.x,this.y,e))return!1;this.scale=e},createCrop:function(t){var e=this;t.preventDefault();var i="clientX"in t?t.clientX:t.touches?t.touches[0].clientX:0,o="clientY"in t?t.clientY:t.touches?t.touches[0].clientY:0;this.$nextTick((function(){var t=i-e.cropX,n=o-e.cropY;if(t>0?(e.cropW=t+e.cropChangeX>e.w?e.w-e.cropChangeX:t,e.cropOffsertX=e.cropChangeX):(e.cropW=e.w-e.cropChangeX+Math.abs(t)>e.w?e.cropChangeX:Math.abs(t),e.cropOffsertX=e.cropChangeX+t>0?e.cropChangeX+t:0),e.fixed){var s=e.cropW/e.fixedNumber[0]*e.fixedNumber[1];s+e.cropOffsertY>e.h?(e.cropH=e.h-e.cropOffsertY,e.cropW=e.cropH/e.fixedNumber[1]*e.fixedNumber[0],e.cropOffsertX=t>0?e.cropChangeX:e.cropChangeX-e.cropW):e.cropH=s,e.cropOffsertY=e.cropOffsertY}else n>0?(e.cropH=n+e.cropChangeY>e.h?e.h-e.cropChangeY:n,e.cropOffsertY=e.cropChangeY):(e.cropH=e.h-e.cropChangeY+Math.abs(n)>e.h?e.cropChangeY:Math.abs(n),e.cropOffsertY=e.cropChangeY+n>0?e.cropChangeY+n:0)}))},changeCropSize:function(t,e,i,o,n){t.preventDefault(),window.addEventListener("mousemove",this.changeCropNow),window.addEventListener("mouseup",this.changeCropEnd),window.addEventListener("touchmove",this.changeCropNow),window.addEventListener("touchend",this.changeCropEnd),this.canChangeX=e,this.canChangeY=i,this.changeCropTypeX=o,this.changeCropTypeY=n,this.cropX="clientX"in t?t.clientX:t.touches[0].clientX,this.cropY="clientY"in t?t.clientY:t.touches[0].clientY,this.cropOldW=this.cropW,this.cropOldH=this.cropH,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.fixed&&this.canChangeX&&this.canChangeY&&(this.canChangeY=0),this.$emit("change-crop-size",{width:this.cropW,height:this.cropH})},changeCropNow:function(t){var e=this;t.preventDefault();var i="clientX"in t?t.clientX:t.touches?t.touches[0].clientX:0,o="clientY"in t?t.clientY:t.touches?t.touches[0].clientY:0,n=this.w,s=this.h,r=0,a=0;if(this.centerBox){var h=this.getImgAxis(),l=h.x2,c=h.y2;r=h.x1>0?h.x1:0,a=h.y1>0?h.y1:0,n>l&&(n=l),s>c&&(s=c)}this.$nextTick((function(){var t=i-e.cropX,h=o-e.cropY;if(e.canChangeX&&(1===e.changeCropTypeX?e.cropOldW-t>0?(e.cropW=n-e.cropChangeX-t<=n-r?e.cropOldW-t:e.cropOldW+e.cropChangeX-r,e.cropOffsertX=n-e.cropChangeX-t<=n-r?e.cropChangeX+t:r):(e.cropW=Math.abs(t)+e.cropChangeX<=n?Math.abs(t)-e.cropOldW:n-e.cropOldW-e.cropChangeX,e.cropOffsertX=e.cropChangeX+e.cropOldW):2===e.changeCropTypeX&&(e.cropOldW+t>0?(e.cropW=e.cropOldW+t+e.cropOffsertX<=n?e.cropOldW+t:n-e.cropOffsertX,e.cropOffsertX=e.cropChangeX):(e.cropW=n-e.cropChangeX+Math.abs(t+e.cropOldW)<=n-r?Math.abs(t+e.cropOldW):e.cropChangeX-r,e.cropOffsertX=n-e.cropChangeX+Math.abs(t+e.cropOldW)<=n-r?e.cropChangeX-Math.abs(t+e.cropOldW):r))),e.canChangeY&&(1===e.changeCropTypeY?e.cropOldH-h>0?(e.cropH=s-e.cropChangeY-h<=s-a?e.cropOldH-h:e.cropOldH+e.cropChangeY-a,e.cropOffsertY=s-e.cropChangeY-h<=s-a?e.cropChangeY+h:a):(e.cropH=Math.abs(h)+e.cropChangeY<=s?Math.abs(h)-e.cropOldH:s-e.cropOldH-e.cropChangeY,e.cropOffsertY=e.cropChangeY+e.cropOldH):2===e.changeCropTypeY&&(e.cropOldH+h>0?(e.cropH=e.cropOldH+h+e.cropOffsertY<=s?e.cropOldH+h:s-e.cropOffsertY,e.cropOffsertY=e.cropChangeY):(e.cropH=s-e.cropChangeY+Math.abs(h+e.cropOldH)<=s-a?Math.abs(h+e.cropOldH):e.cropChangeY-a,e.cropOffsertY=s-e.cropChangeY+Math.abs(h+e.cropOldH)<=s-a?e.cropChangeY-Math.abs(h+e.cropOldH):a))),e.canChangeX&&e.fixed){var l=e.cropW/e.fixedNumber[0]*e.fixedNumber[1];l+e.cropOffsertY>s?(e.cropH=s-e.cropOffsertY,e.cropW=e.cropH/e.fixedNumber[1]*e.fixedNumber[0]):e.cropH=l}if(e.canChangeY&&e.fixed){var c=e.cropH/e.fixedNumber[1]*e.fixedNumber[0];c+e.cropOffsertX>n?(e.cropW=n-e.cropOffsertX,e.cropH=e.cropW/e.fixedNumber[0]*e.fixedNumber[1]):e.cropW=c}e.$emit("crop-sizing",{cropW:e.cropW,cropH:e.cropH})}))},checkCropLimitSize:function(){this.cropW,this.cropH;var t=this.limitMinSize,e=new Array;return e=Array.isArray[t]?t:[t,t],[parseFloat(e[0]),parseFloat(e[1])]},changeCropEnd:function(t){window.removeEventListener("mousemove",this.changeCropNow),window.removeEventListener("mouseup",this.changeCropEnd),window.removeEventListener("touchmove",this.changeCropNow),window.removeEventListener("touchend",this.changeCropEnd)},endCrop:function(){0===this.cropW&&0===this.cropH&&(this.cropping=!1),window.removeEventListener("mousemove",this.createCrop),window.removeEventListener("mouseup",this.endCrop),window.removeEventListener("touchmove",this.createCrop),window.removeEventListener("touchend",this.endCrop)},startCrop:function(){this.crop=!0},stopCrop:function(){this.crop=!1},clearCrop:function(){this.cropping=!1,this.cropW=0,this.cropH=0},cropMove:function(t){if(t.preventDefault(),!this.canMoveBox)return this.crop=!1,this.startMove(t),!1;if(t.touches&&2===t.touches.length)return this.crop=!1,this.startMove(t),this.leaveCrop(),!1;window.addEventListener("mousemove",this.moveCrop),window.addEventListener("mouseup",this.leaveCrop),window.addEventListener("touchmove",this.moveCrop),window.addEventListener("touchend",this.leaveCrop);var e,i,o="clientX"in t?t.clientX:t.touches[0].clientX,n="clientY"in t?t.clientY:t.touches[0].clientY;e=o-this.cropOffsertX,i=n-this.cropOffsertY,this.cropX=e,this.cropY=i,this.$emit("cropMoving",{moving:!0,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})},moveCrop:function(t,e){var i=this,o=0,n=0;t&&(t.preventDefault(),o="clientX"in t?t.clientX:t.touches[0].clientX,n="clientY"in t?t.clientY:t.touches[0].clientY),this.$nextTick((function(){var t,s,r=o-i.cropX,a=n-i.cropY;if(e&&(r=i.cropOffsertX,a=i.cropOffsertY),t=r<=0?0:r+i.cropW>i.w?i.w-i.cropW:r,s=a<=0?0:a+i.cropH>i.h?i.h-i.cropH:a,i.centerBox){var h=i.getImgAxis();t<=h.x1&&(t=h.x1),t+i.cropW>h.x2&&(t=h.x2-i.cropW),s<=h.y1&&(s=h.y1),s+i.cropH>h.y2&&(s=h.y2-i.cropH)}i.cropOffsertX=t,i.cropOffsertY=s,i.$emit("cropMoving",{moving:!0,axis:i.getCropAxis()}),i.$emit("crop-moving",{moving:!0,axis:i.getCropAxis()})}))},getImgAxis:function(t,e,i){t=t||this.x,e=e||this.y,i=i||this.scale;var o={x1:0,x2:0,y1:0,y2:0},n=this.trueWidth*i,s=this.trueHeight*i;switch(this.rotate){case 0:o.x1=t+this.trueWidth*(1-i)/2,o.x2=o.x1+this.trueWidth*i,o.y1=e+this.trueHeight*(1-i)/2,o.y2=o.y1+this.trueHeight*i;break;case 1:case-1:case 3:case-3:o.x1=t+this.trueWidth*(1-i)/2+(n-s)/2,o.x2=o.x1+this.trueHeight*i,o.y1=e+this.trueHeight*(1-i)/2+(s-n)/2,o.y2=o.y1+this.trueWidth*i;break;default:o.x1=t+this.trueWidth*(1-i)/2,o.x2=o.x1+this.trueWidth*i,o.y1=e+this.trueHeight*(1-i)/2,o.y2=o.y1+this.trueHeight*i}return o},getCropAxis:function(){var t={x1:0,x2:0,y1:0,y2:0};return t.x1=this.cropOffsertX,t.x2=t.x1+this.cropW,t.y1=this.cropOffsertY,t.y2=t.y1+this.cropH,t},leaveCrop:function(t){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.$emit("cropMoving",{moving:!1,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!1,axis:this.getCropAxis()})},getCropChecked:function(t){var e=this,i=document.createElement("canvas"),o=new Image,n=this.rotate,s=this.trueWidth,r=this.trueHeight,a=this.cropOffsertX,h=this.cropOffsertY;function l(t,e){i.width=Math.round(t),i.height=Math.round(e)}o.onload=function(){if(0!==e.cropW){var c=i.getContext("2d"),p=1;e.high&!e.full&&(p=window.devicePixelRatio),1!==e.enlarge&!e.full&&(p=Math.abs(Number(e.enlarge)));var u=e.cropW*p,d=e.cropH*p,g=s*e.scale*p,f=r*e.scale*p,m=(e.x-a+e.trueWidth*(1-e.scale)/2)*p,v=(e.y-h+e.trueHeight*(1-e.scale)/2)*p;switch(l(u,d),c.save(),n){case 0:e.full?(l(u/e.scale,d/e.scale),c.drawImage(o,m/e.scale,v/e.scale,g/e.scale,f/e.scale)):c.drawImage(o,m,v,g,f);break;case 1:case-3:e.full?(l(u/e.scale,d/e.scale),m=m/e.scale+(g/e.scale-f/e.scale)/2,v=v/e.scale+(f/e.scale-g/e.scale)/2,c.rotate(90*n*Math.PI/180),c.drawImage(o,v,-m-f/e.scale,g/e.scale,f/e.scale)):(m+=(g-f)/2,v+=(f-g)/2,c.rotate(90*n*Math.PI/180),c.drawImage(o,v,-m-f,g,f));break;case 2:case-2:e.full?(l(u/e.scale,d/e.scale),c.rotate(90*n*Math.PI/180),m/=e.scale,v/=e.scale,c.drawImage(o,-m-g/e.scale,-v-f/e.scale,g/e.scale,f/e.scale)):(c.rotate(90*n*Math.PI/180),c.drawImage(o,-m-g,-v-f,g,f));break;case 3:case-1:e.full?(l(u/e.scale,d/e.scale),m=m/e.scale+(g/e.scale-f/e.scale)/2,v=v/e.scale+(f/e.scale-g/e.scale)/2,c.rotate(90*n*Math.PI/180),c.drawImage(o,-v-g/e.scale,m,g/e.scale,f/e.scale)):(m+=(g-f)/2,v+=(f-g)/2,c.rotate(90*n*Math.PI/180),c.drawImage(o,-v-g,m,g,f));break;default:e.full?(l(u/e.scale,d/e.scale),c.drawImage(o,m/e.scale,v/e.scale,g/e.scale,f/e.scale)):c.drawImage(o,m,v,g,f)}c.restore()}else{var x=s*e.scale,w=r*e.scale,y=i.getContext("2d");switch(y.save(),n){case 0:l(x,w),y.drawImage(o,0,0,x,w);break;case 1:case-3:l(w,x),y.rotate(90*n*Math.PI/180),y.drawImage(o,0,-w,x,w);break;case 2:case-2:l(x,w),y.rotate(90*n*Math.PI/180),y.drawImage(o,-x,-w,x,w);break;case 3:case-1:l(w,x),y.rotate(90*n*Math.PI/180),y.drawImage(o,-x,0,x,w);break;default:l(x,w),y.drawImage(o,0,0,x,w)}y.restore()}t(i)},"data"!==this.img.substr(0,4)&&(o.crossOrigin="Anonymous"),o.src=this.imgs},getCropData:function(t){var e=this;this.getCropChecked((function(i){t(i.toDataURL("image/"+e.outputType,e.outputSize))}))},getCropBlob:function(t){var e=this;this.getCropChecked((function(i){i.toBlob((function(e){return t(e)}),"image/"+e.outputType,e.outputSize)}))},showPreview:function(){var t=this;if(!this.isCanShow)return!1;this.isCanShow=!1,setTimeout((function(){t.isCanShow=!0}),16);var e=this.cropW,i=this.cropH,o=this.scale,n={};n.div={width:"".concat(e,"px"),height:"".concat(i,"px")};var s=(this.x-this.cropOffsertX)/o,r=(this.y-this.cropOffsertY)/o;n.w=e,n.h=i,n.url=this.imgs,n.img={width:"".concat(this.trueWidth,"px"),height:"".concat(this.trueHeight,"px"),transform:"scale(".concat(o,")translate3d(").concat(s,"px, ").concat(r,"px, ").concat(0,"px)rotateZ(").concat(90*this.rotate,"deg)")},n.html='\n      <div class="show-preview" style="width: '.concat(n.w,"px; height: ").concat(n.h,'px,; overflow: hidden">\n        <div style="width: ').concat(e,"px; height: ").concat(i,'px">\n          <img src=').concat(n.url,' style="width: ').concat(this.trueWidth,"px; height: ").concat(this.trueHeight,"px; transform:\n          scale(").concat(o,")translate3d(").concat(s,"px, ").concat(r,"px, ").concat(0,"px)rotateZ(").concat(90*this.rotate,'deg)">\n        </div>\n      </div>'),this.$emit("realTime",n),this.$emit("real-time",n)},reload:function(){var t=this,e=new Image;e.onload=function(){t.w=parseFloat(window.getComputedStyle(t.$refs.cropper).width),t.h=parseFloat(window.getComputedStyle(t.$refs.cropper).height),t.trueWidth=e.width,t.trueHeight=e.height,t.original?t.scale=1:t.scale=t.checkedMode(),t.$nextTick((function(){t.x=-(t.trueWidth-t.trueWidth*t.scale)/2+(t.w-t.trueWidth*t.scale)/2,t.y=-(t.trueHeight-t.trueHeight*t.scale)/2+(t.h-t.trueHeight*t.scale)/2,t.loading=!1,t.autoCrop&&t.goAutoCrop(),t.$emit("img-load","success"),t.$emit("imgLoad","success"),setTimeout((function(){t.showPreview()}),20)}))},e.onerror=function(){t.$emit("imgLoad","error"),t.$emit("img-load","error")},e.src=this.imgs},checkedMode:function(){var t=1,e=(this.trueWidth,this.trueHeight),i=this.mode.split(" ");switch(i[0]){case"contain":this.trueWidth>this.w&&(t=this.w/this.trueWidth),this.trueHeight*t>this.h&&(t=this.h/this.trueHeight);break;case"cover":(e*=t=this.w/this.trueWidth)<this.h&&(t=(e=this.h)/this.trueHeight);break;default:try{var o=i[0];if(-1!==o.search("px")){o=o.replace("px","");var n=parseFloat(o)/this.trueWidth,s=1,r=i[1];-1!==r.search("px")&&(r=r.replace("px",""),s=(e=parseFloat(r))/this.trueHeight),t=Math.min(n,s)}if(-1!==o.search("%")&&(o=o.replace("%",""),t=parseFloat(o)/100*this.w/this.trueWidth),2===i.length&&"auto"===o){var a=i[1];-1!==a.search("px")&&(a=a.replace("px",""),t=(e=parseFloat(a))/this.trueHeight),-1!==a.search("%")&&(a=a.replace("%",""),t=(e=parseFloat(a)/100*this.h)/this.trueHeight)}}catch(e){t=1}}return t},goAutoCrop:function(t,e){if(""!==this.imgs&&null!==this.imgs){this.clearCrop(),this.cropping=!0;var i=this.w,o=this.h;if(this.centerBox){var n=Math.abs(this.rotate)%2>0,s=(n?this.trueHeight:this.trueWidth)*this.scale,r=(n?this.trueWidth:this.trueHeight)*this.scale;i=s<i?s:i,o=r<o?r:o}var a=t||parseFloat(this.autoCropWidth),h=e||parseFloat(this.autoCropHeight);0!==a&&0!==h||(a=.8*i,h=.8*o),a=a>i?i:a,h=h>o?o:h,this.fixed&&(h=a/this.fixedNumber[0]*this.fixedNumber[1]),h>this.h&&(a=(h=this.h)/this.fixedNumber[1]*this.fixedNumber[0]),this.changeCrop(a,h)}},changeCrop:function(t,e){var i=this;if(this.centerBox){var o=this.getImgAxis();t>o.x2-o.x1&&(e=(t=o.x2-o.x1)/this.fixedNumber[0]*this.fixedNumber[1]),e>o.y2-o.y1&&(t=(e=o.y2-o.y1)/this.fixedNumber[1]*this.fixedNumber[0])}this.cropW=t,this.cropH=e,this.checkCropLimitSize(),this.$nextTick((function(){i.cropOffsertX=(i.w-i.cropW)/2,i.cropOffsertY=(i.h-i.cropH)/2,i.centerBox&&i.moveCrop(null,!0)}))},refresh:function(){var t=this;this.img,this.imgs="",this.scale=1,this.crop=!1,this.rotate=0,this.w=0,this.h=0,this.trueWidth=0,this.trueHeight=0,this.clearCrop(),this.$nextTick((function(){t.checkedImg()}))},rotateLeft:function(){this.rotate=this.rotate<=-3?0:this.rotate-1},rotateRight:function(){this.rotate=this.rotate>=3?0:this.rotate+1},rotateClear:function(){this.rotate=0},checkoutImgAxis:function(t,e,i){t=t||this.x,e=e||this.y,i=i||this.scale;var o=!0;if(this.centerBox){var n=this.getImgAxis(t,e,i),s=this.getCropAxis();n.x1>=s.x1&&(o=!1),n.x2<=s.x2&&(o=!1),n.y1>=s.y1&&(o=!1),n.y2<=s.y2&&(o=!1)}return o}},mounted:function(){this.support="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll";var t=this,e=navigator.userAgent;this.isIOS=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(e,i,o){for(var n=atob(this.toDataURL(i,o).split(",")[1]),s=n.length,r=new Uint8Array(s),a=0;a<s;a++)r[a]=n.charCodeAt(a);e(new Blob([r],{type:t.type||"image/png"}))}}),this.showPreview(),this.checkedImg()},destroyed:function(){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.cancelScale()}};i(1);var a=function(t,e,i,o,n,s,r,a){var h,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=i,l._compiled=!0),o&&(l.functional=!0),s&&(l._scopeId="data-v-"+s),r?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=h):n&&(h=a?function(){n.call(this,this.$root.$options.shadowRoot)}:n),h)if(l.functional){l._injectStyles=h;var c=l.render;l.render=function(t,e){return h.call(e),c(t,e)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,h):[h]}return{exports:t,options:l}}(r,o,[],!1,null,"6dae58fd",null);a.options.__file="src/vue-cropper.vue";var h=a.exports;i.d(e,"VueCropper",(function(){return h}));var l=function(t){t.component("VueCropper",h)};"undefined"!=typeof window&&window.Vue&&l(window.Vue),e.default={version:"0.5.8",install:l,VueCropper:h,vueCropper:h}}])}))},8342:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return N}});var o=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"fourupdata"}},[e("Music"),e("div",{staticClass:"home_container"},[e("div",{staticClass:"iconback",on:{click:t.back}},[e("img",{attrs:{src:i(84),alt:""}})]),4==t.timedata?e("div",{staticClass:"pm",on:{click:t.gotopm}},[t._v("排行榜")]):t._e(),t._m(0),e("div",{staticClass:"home_info"},[e("div",{staticClass:"home_info_cont"},[e("p",[t._v("我的步数：")]),e("p",[t._v(t._s(t.myData.my_step))])])]),e("div",{staticClass:"title"},[t._v("示例:")]),e("div",{staticClass:"uploader"},[t.scanData?e("img",{attrs:{src:t.scanData,alt:""}}):e("img",{attrs:{src:i(2886),alt:""}})]),t._m(1),t._m(2),e("div",{staticClass:"back_btn"},[t.btnShow?t._e():e("div",{staticClass:"back"},[e("van-uploader",{attrs:{"after-read":t.goto}},[e("div",[t._v("上传图片")])]),t.picloalog?e("Vue-imageCutting",{attrs:{picturePath:t.fileContent,crossDomain:t.crossDomainData},on:{confirm:t.confirmMethod,cancel:t.cancelMethod}}):t._e()],1),t.btnShow?e("div",{staticClass:"back"},[e("div",{on:{click:t.submit}},[t._v("提交")])]):t._e()]),e("van-popup",{model:{value:t.dialogValue,callback:function(e){t.dialogValue=e},expression:"dialogValue"}},[e("div",{staticClass:"dialog_tis",staticStyle:{"margin-top":"4.2667rem"}},[t._v(" 恭喜您上传成功 ")]),e("div",{staticClass:"dialog_tis"},[t._v("今日步数已累计添加到每周排名")]),e("div",{staticClass:"dialog_tis"},[t._v("请在周四查看排行榜信息")]),e("div",{staticClass:"dialog_back"},[e("div",{on:{click:function(e){t.dialogValue=!1}}},[t._v("确定")])])]),t.loadingData?e("van-loading",{attrs:{type:"spinner",size:"24px"}},[t._v("加载中...")]):t._e()],1)],1)},n=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"home_title"},[e("p",[t._v("雀巢咖啡，提醒每一天")]),e("h1",[t._v("同学，请放下手机运动吧！")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tix"},[e("p",[t._v("步骤：打开微信运动 - 步数排行榜 - 个人排行")]),e("p",{staticStyle:{"font-size":"0.5067rem","margin-top":"0.1333rem"}},[t._v(" 截图保存上传图片 ")])])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"tix"},[e("p",{staticStyle:{"font-size":"0.2667rem","line-height":"0.48rem"}},[t._v(" 上传成功即可累计步数参加每周排行 ")])])}],s=(i(9512),i(8979)),r=function(){var t=this,e=t._self._c;return e("van-popup",{staticClass:"bg-tran image-cropper",style:{height:"100%"},attrs:{closeable:"",position:"top","lock-scroll":!1},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("div",{staticClass:"flex-column-center height100"},[e("vueCropper",{ref:"imageCropper",attrs:{img:t.url,outputSize:t.option.outputSize,outputType:t.option.outputType,info:t.option.info,full:t.option.full,autoCropWidth:t.option.autoCropWidth,autoCropHeight:t.option.autoCropHeight,canMove:t.option.canMove,canMoveBox:t.option.canMoveBox,original:t.option.original,autoCrop:t.option.autoCrop,fixed:t.option.fixed,fixedNumber:t.option.fixedNumber,centerBox:t.option.centerBox,infoTrue:t.option.infoTrue,fixedBox:t.option.fixedBox,high:t.option.high,mode:t.option.mode}}),e("van-col",{staticClass:"font14 col-white",attrs:{span:"24"}},[e("van-col",{staticClass:"p-2",attrs:{span:"8"},on:{click:t.onCancel}},[e("span",[t._v("取消")])]),e("van-col",{staticClass:"p-2 text-center",attrs:{span:"8"},on:{click:t.rotateImage}},[e("span",{staticClass:"font18"},[e("van-icon",{attrs:{name:"replay"}})],1)]),e("van-col",{staticClass:"p-2 text-right",attrs:{span:"8"},on:{click:t.onConfirm}},[e("span",[t._v("确定"),t.loading?e("i",{staticClass:"el-icon-loading"}):t._e()])])],1)],1)])},a=[],h=i(8578),l=i(1093),c={components:{VueCropper:h.VueCropper},props:{visible:Boolean,url:String},data(){return{loading:!1,option:{outputSize:.8,info:!1,outputType:"jpeg",canScale:!1,autoCrop:!0,autoCropWidth:window.innerWidth-100+"px",autoCropHeight:window.innerWidth-100+"px",high:!0,fixedBox:!0,fixed:!0,fixedNumber:[1,1],full:!0,canMoveBox:!1,original:!1,centerBox:!1,infoTrue:!1,mode:"100% auto"}}},methods:{rotateImage(){this.$refs.imageCropper.rotateRight()},onCancel(){this.$emit("cancel")},onConfirm(){this.loading||(this.loading=!0,this.$refs.imageCropper.getCropBlob((t=>{console.log(t),this.handleChange(t).then((e=>{console.log(t),this.$emit("success",t),this.loading=!1}),(t=>{this.loading=!1}))})))},async handleChange(t){let e="wUbxngjGDBUEsS-kulRcXh2Jp-9dXkVM",i="gxcRJD0wqwVElf2OemeFMLWqLIo9ywNR",o=t.content,n=new FormData;n.append("api_key",e),n.append("api_secret",i),n.append("image_base64",o);let s=await(0,l.ZP)({url:"https://api-cn.faceplusplus.com/imagepp/v2/generalocr",method:"post",data:n});console.log(s)}}},p=c,u=i(8412),d=(0,u.Z)(p,r,a,!1,null,null,null),g=d.exports,f=function(){var t=this,e=t._self._c;return e("div",[!0===t.showChooseBtn&&!0===t.isModal?e("div",{on:{click:t.handleOpen}},[t._t("openImgCutter"),t._t("open")],2):t._e(),t.$slots.openImgCutter||t.$slots.open||!0!==t.isModal?t._e():e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.handleOpen}},[t._v(" "+t._s(t.label)+" ")]),e("transition",{attrs:{name:"fade"}},[t.visible?e("div",{ref:"mask",class:!0===t.isModal?"mask vue-img-cutter":""},[t.visible?e("div",{class:!0===t.isModal?"dialogBoxModal":"dialogBox"},[e("transition",{attrs:{name:"fade","enter-class":"fade-in-enter","enter-active-class":"fade-in-active","leave-class":"fade-out-enter","leave-active-class":"fade-out-active"}},[e("div",{ref:"dialogMainModalRef",class:!0===t.isModal?"dialogMainModal":"dialogMain",style:"width:"+(!0===t.isModal?t.boxWidth+32:t.boxWidth)+"px"},[e("div",{staticClass:"toolMain"},[!0===t.isModal?e("div",{staticClass:"tool-title"},[t._v(" 图片裁剪 "),e("span",{staticClass:"closeIcon",on:{click:t.handleClose}},[t._v("×")])]):t._e(),e("div",{ref:"toolBox",staticClass:"toolBox",style:"height:"+t.boxHeight+"px;width:"+t.boxWidth+"px",on:{mousemove:t.controlBtnMouseMove,mouseup:t.controlBtnMouseUp,mouseleave:t.controlBtnMouseUp}},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.drawImg.img&&!0===t.showChooseBtn,expression:"!drawImg.img && showChooseBtn === true"}],staticClass:"tips"},[e("div",{staticClass:"btn btn-warning btn-xs",on:{click:t.chooseImg}},[t._v(" "+t._s(t.label)+" ")])]),1==t.tool?e("div",{directives:[{name:"show",rawName:"v-show",value:t.drawImg.img&&!0!==t.dropImg.active&&1==t.controlBox.disable&&1==t.toolBox.disable,expression:"\n                                        drawImg.img &&\n                                        dropImg.active !== true &&\n                                        controlBox.disable == true &&\n                                        toolBox.disable == true\n                                    "}],staticClass:"dockMain",style:"background:"+t.toolBgc,on:{mouseenter:t.dropImgOff}},[t.rate?e("div",{staticClass:"dockBtn"},[t._t("ratio",(function(){return[t._v(" Ratio: ")]})),t._v(" "+t._s(t.rate)+" ")],2):t._e(),e("div",{staticClass:"dockBtn",on:{click:t.scaleReset}},[t._t("scaleReset",(function(){return[t._v(" Scale: ")]})),t._v(" "+t._s(t.drawImg.swidth>0?(t.drawImg.width/t.drawImg.swidth).toFixed(2):"-")+" ")],2),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:function(e){return t.turnImg(-90)}}},[t._t("turnLeft",(function(){return[t._v(" ↳ ")]}))],2):t._e(),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:function(e){return t.turnImg(90)}}},[t._t("turnRight",(function(){return[t._v(" ↲ ")]}))],2):t._e(),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:function(e){return t.turnReset()}}},[t._t("reset",(function(){return[t._v(" ↻ ")]}))],2):t._e(),!1===t.originalGraph?e("div",{staticClass:"dockBtnScrollBar"},[e("div",{ref:"dockBtnScrollControl",staticClass:"scrollBarControl",style:"left:"+t.rotateControl.position+"px",on:{mousemove:t.scrollBarControlMove,mousedown:t.scrollBarControlOn,mouseleave:t.scrollBarControlOff,mouseup:t.scrollBarControlOff}}),1==t.rotateControl.active?e("div",{staticClass:"scrollBarText",style:"left:"+t.rotateControl.position+"px"},[t._v(" "+t._s(t.rotateImg.angle.toFixed(0)+"°")+" ")]):t._e()]):t._e(),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:t.flipHorizontal}},[t._t("flipHorizontal",(function(){return[t._v(" ⇆ ")]}))],2):t._e(),!1===t.originalGraph?e("div",{staticClass:"dockBtn",on:{click:t.flipVertically}},[t._t("flipVertically",(function(){return[t._v(" ⇅ ")]}))],2):t._e()]):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:null!=t.drawImg.img,expression:"drawImg.img != null"}],ref:"toolBoxControl",staticClass:"toolBoxControl",on:{mousedown:t.toolBoxMouseDown,mouseup:t.toolBoxMouseUp,mousemove:t.toolBoxMouseMove,mouseleave:t.toolBoxMouseLeave}},[e("div",{staticClass:"toolBoxControlBox"},[e("div",{staticClass:"controlBox"},[e("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineTop"}),e("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineBottom"}),e("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineLeft"}),e("div",{staticClass:"controlBoxInnerLine controlBoxInnerLineRight"}),e("div",{staticClass:"selectArea"},[t._v(" 宽:"+t._s(t.showToolBoxWidth)+" 高:"+t._s(t.showToolBoxHeight)+" (x:"+t._s(t.showToolBoxX)+",y:"+t._s(t.showToolBoxY)+") ")]),!0===t.sizeChange?e("div",{staticClass:"leftUp controlBtn",attrs:{"data-name":"leftUp"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"leftUp")}}}):t._e(),!0===t.sizeChange?e("div",{staticClass:"leftDown controlBtn",attrs:{"data-name":"leftDown"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"leftDown")}}}):t._e(),!0===t.sizeChange?e("div",{staticClass:"rightUp controlBtn",attrs:{"data-name":"rightUp"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"rightUp")}}}):t._e(),!0===t.sizeChange?e("div",{staticClass:"rightDown controlBtn",attrs:{"data-name":"rightDown"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"rightDown")}}}):t._e(),!0===t.sizeChange&&!t.rate&&t.toolBox.width>20?e("div",{staticClass:"topCenter controlBtn",attrs:{"data-name":"topCenter"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"topCenter")}}}):t._e(),!0===t.sizeChange&&!t.rate&&t.toolBox.width>20?e("div",{staticClass:"downCenter controlBtn",attrs:{"data-name":"downCenter"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"downCenter")}}}):t._e(),!0===t.sizeChange&&!t.rate&&t.toolBox.height>20?e("div",{staticClass:"leftCenter controlBtn",attrs:{"data-name":"leftCenter"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"leftCenter")}}}):t._e(),!0===t.sizeChange&&!t.rate&&t.toolBox.height>20?e("div",{staticClass:"rightCenter controlBtn",attrs:{"data-name":"rightCenter"},on:{mousedown:function(e){return t.controlBtnMouseDown(e,"rightCenter")}}}):t._e()]),e("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-1"}),e("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-2"}),e("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-3"}),e("div",{staticClass:"toolBoxControlLine toolBoxControlLineItem-4"})])]),e("div",{staticClass:"copyright"},[t.DoNotDisplayCopyright?t._e():e("a",{attrs:{target:"_blank",href:"https://github.com/acccccccb/vue-img-cutter",rel:"nofollow"}},[t._v(" vue-img-cutter "+t._s(t.version)+" ")])]),e("canvas",{ref:"canvasSelectBox",staticClass:"canvasSelectBox",attrs:{width:t.boxWidth,height:t.boxHeight},on:{mousedown:t.dropImgOn,mouseup:t.dropImgOff,mousemove:t.dropImgMove}}),e("canvas",{ref:"canvas",staticClass:"canvas",attrs:{width:t.boxWidth,height:t.boxHeight}})])]),e("div",{staticClass:"i-dialog-footer",staticStyle:{height:"40px"}},[e("input",{ref:"inputFile",staticStyle:{width:"1px",height:"1px",border:"none",opacity:"0"},attrs:{type:"file",accept:"image/gif, image/jpeg ,image/png"},on:{change:t.putImgToCanv}}),e("span",{on:{click:t.chooseImg}},[t._t("choose",(function(){return[!0===t.showChooseBtn?e("div",{staticClass:"btn btn-primary btn-primary-plain"},[t._v(" "+t._s(t.label)+" ")]):t._e()]}))],2),e("div",{staticClass:"btn-group fr"},[e("span",{on:{click:t.handleClose}},[t._t("cancel",(function(){return[e("button",{staticClass:"btn btn-default",attrs:{type:"button"}},[t._v("取消")])]}))],2),e("span",{on:{click:function(e){return t.cropPicture(!1)}}},[t._t("confirm",(function(){return[e("button",{staticClass:"btn btn-primary",staticStyle:{"margin-left":"15px"},attrs:{type:"button",disabled:!t.drawImg.img}},[t._v(" 确定 ")])]}))],2)])])])]),e("div",{staticStyle:{clear:"both"}})],1):t._e()]):t._e()])],1)},m=[],v=(i(7788),i(1952),i(4605),{i8:"3.0.2"}),x={name:"ImgCutter",props:{crossOrigin:{type:Boolean,default:!1,required:!1},crossOriginHeader:{type:String,default:"*",required:!1},label:{type:String,default:"选择图片",required:!1},isModal:{type:Boolean,default:!0,required:!1},lockScroll:{type:Boolean,default:!0,required:!1},showChooseBtn:{type:Boolean,default:!0,required:!1},boxWidth:{type:Number,default:800,required:!1},boxHeight:{type:Number,default:400,required:!1},cutWidth:{type:Number,default:200,required:!1},cutHeight:{type:Number,default:200,required:!1},rate:{type:String,default:null,required:!1},tool:{type:Boolean,default:!0,required:!1},toolBgc:{type:String,default:"#fff",required:!1},imgMove:{type:Boolean,default:!0,required:!1},sizeChange:{type:Boolean,default:!0,required:!1},originalGraph:{type:Boolean,default:!1,required:!1},moveAble:{type:Boolean,default:!0,required:!1},previewMode:{type:Boolean,default:!0,required:!1},CuttingOriginal:{type:Boolean,default:!1,required:!1},WatermarkText:{type:String,default:"",required:!1},WatermarkTextFont:{type:String,default:"12px Sans-serif",required:!1},WatermarkTextColor:{type:String,default:"#fff",required:!1},WatermarkTextX:{type:Number,default:.95,required:!1},WatermarkTextY:{type:Number,default:.95,required:!1},smallToUpload:{type:Boolean,default:!1,required:!1},saveCutPosition:{type:Boolean,default:!1,required:!1},scaleAble:{type:Boolean,default:!0,required:!1},index:{default:null,required:!1},fileType:{default:"png",required:!1,type:String},toolBoxOverflow:{type:Boolean,default:!0,required:!1},DoNotDisplayCopyright:{type:Boolean,default:!1,required:!1},quality:{type:Number,default:1,required:!1}},model:["label","boxWidth","boxHeight","rate","tool","DoNotDisplayCopyright"],data(){let t,e;return t=this.boxWidth/2,e=this.boxHeight/2,{version:"",visible:!1,fileName:"",cutImageObj:null,onPrintImgTimmer:null,toolBoxPosition:{x:0,y:0},drawImg:{img:null,sx:0,sy:0,swidth:0,sheight:0,x:0,y:0,width:0,height:0},toolBox:{disable:!0,width:t,height:e,x:0,y:0,boxMove:{start:{x:0,y:0},moveTo:{x:0,y:0}}},dropImg:{active:!1,pageX:0,pageY:0,params:{}},rotateImg:{angle:0},rotateControl:{active:!1,start:{x:0,y:0},position:100},scaleImg:{rate:0,params:{}},controlBox:{disable:!0,btnName:"",start:{x:0,y:0,width:0,height:0}},selectBox:!1,selectBoxColor:"rgba(0,0,0,0.6)",isFlipHorizontal:!1,isFlipVertically:!1}},mounted(){this.version=v.i8,!1===this.isModal&&(this.visible=!0,this.$nextTick((()=>{this.$refs["toolBox"]&&(this.$refs["toolBox"].onmousewheel=this.scaleImgWheel,this.$refs["toolBox"].addEventListener("DOMMouseScroll",this.scaleImgWheel))})))},methods:{handleOpen(t){let e=t=>{if(this.$refs["toolBox"]&&(this.$refs["toolBox"].onmousewheel=this.scaleImgWheel,this.$refs["toolBox"].addEventListener("DOMMouseScroll",this.scaleImgWheel)),!0===this.isModal){!0===this.lockScroll&&(document.body.style.overflowY="hidden");let t=this.$refs["dialogMainModalRef"].offsetHeight+200,e=window.innerHeight,i=this.$refs["mask"];i.style.overflowY=t>e?"scroll":"hidden"}t&&"function"===typeof t&&t()};if(t&&"object"==typeof t&&t.src){if(!t.name)throw new Error("传入参数必须包含：src,name");{let i=new Image;!0===this.crossOrigin&&(i.crossOrigin=this.crossOriginHeader),i.name=t.name,i.style.position="fixed",i.style.top="-5000px",i.style.opacity=0,i.onerror=t=>{console.error("图片加载失败"),this.$emit("error",{index:this.index,event:t,msg:"图片加载失败"}),this.clearCutImageObj()},i.onload=()=>{if(!0!==i.complete)throw new Error("图片加载失败");this.visible=!0,this.$nextTick((()=>{e((()=>{this.importImgToCanv(i)}))}))},i.src=t.src,this.cutImageObj=i,document.body.appendChild(i),this.$emit("onChooseImg",t,this.index)}}else this.visible=!0,this.$nextTick((()=>{e()}))},handleClose(){this.clearAll(),!0===this.isModal&&(!0===this.lockScroll&&(document.body.style.overflowY="scroll"),this.$nextTick((()=>{this.visible=!1})))},chooseImg(){this.$refs["inputFile"].click()},importImgToCanv(t){let e,i=t.height,o=t.width,n=this.boxWidth,s=this.boxHeight,r={...this.drawImg};this.fileName=t.name,r.img=t,this.scaleImg.rate=o/i,i<s&&o<n?(e=1,r.x=(n-o)/2,r.y=(s-i)/2):o/i<=n/s?(e=s/i,r.x=(n-o*e)/2):(e=n/o,r.y=(s-i*e)/2),r.swidth=o,r.sheight=i,r.width=o*e,r.height=i*e,r.x=(n-r.width)/2,r.y=(s-r.height)/2,this.drawImg=r,this.printImg(),this.putToolBox()},putImgToCanv(t){let e;if(!t.target.files)return console.error("IE9及以下需要自己传入image对象"),!1;if(e=t.target.files[0]||null,e){this.fileName=e.name;let t=new FileReader;t.readAsDataURL(e),t.onload=i=>{let o=i.target.result,n=document.createElement("img");n.src=o;let s=setInterval((()=>{if(2===t.readyState){if(clearInterval(s),!this.sizeChange&&this.smallToUpload&&n.width<=this.cutWidth&&n.height<=this.cutHeight)return this.handleClose(),e.name=this.changeFileName(e.name,this.fileType),void this.$emit("cutDown",{filename:this.changeFileName(e.name,this.fileType),file:e,index:this.index});let t,i=n.height,o=n.width,r=this.boxWidth,a=this.boxHeight,h={...this.drawImg};h.img=n,this.scaleImg.rate=o/i,i<a&&o<r?(t=1,h.x=(r-o)/2,h.y=(a-i)/2):o/i<=r/a?(t=a/i,h.x=(r-o*t)/2):(t=r/o,h.y=(a-i*t)/2),h.swidth=o,h.sheight=i,h.width=o*t,h.height=i*t,h.x=(r-h.width)/2,h.y=(a-h.height)/2,this.drawImg=h,this.printImg(),this.putToolBox()}}),200)},this.$emit("onChooseImg",e,this.index)}},putToolBox(){this.toolBox.width!==this.boxWidth/2&&this.toolBox.height!==this.boxHeight/2&&!1!==this.saveCutPosition||(this.toolBox.width=this.cutWidth>this.boxWidth?this.boxWidth:this.cutWidth,this.toolBox.height=this.cutHeight>this.boxHeight?this.boxHeight:this.cutHeight),(0===this.toolBox.x&&0===this.toolBox.y||!1===this.saveCutPosition)&&(this.toolBox.x=this.boxWidth/2-this.toolBox.width/2,this.toolBox.y=this.boxHeight/2-this.toolBox.height/2),this.checkToolBoxOverflow().then((()=>{this.printImg()})),this.drawControlBox(this.toolBox.width,this.toolBox.height,this.toolBox.x,this.toolBox.y)},checkToolBoxOverflow(){return new Promise((t=>{if(!this.toolBoxOverflow){if(this.drawImg.width<this.toolBox.width||this.drawImg.height<this.toolBox.height){const t=this.drawImg.width/this.drawImg.height;this.drawImg.width<this.toolBox.width&&(this.drawImg.width=this.toolBox.width,this.drawImg.height=this.drawImg.width/t),this.drawImg.height<this.toolBox.height&&(this.drawImg.height=this.toolBox.height,this.drawImg.width=this.drawImg.height*t),this.drawImg.x=(this.boxWidth-this.drawImg.width)/2,this.drawImg.y=(this.boxHeight-this.drawImg.height)/2}console.log("this.drawImg.y > this.toolBox.y",this.drawImg.y+this.drawImg.height,this.toolBox.y+this.toolBox.height),this.drawImg.x>this.toolBox.x&&(this.drawImg.x=this.toolBox.x),this.drawImg.x+this.drawImg.width<this.toolBox.x+this.toolBox.width&&(this.drawImg.x=this.toolBox.x+this.toolBox.width-this.drawImg.width),this.drawImg.y>this.toolBox.y&&(this.drawImg.y=this.toolBox.y),this.drawImg.y+this.drawImg.height<this.toolBox.y+this.toolBox.height&&(this.drawImg.y=this.toolBox.y+this.toolBox.height-this.drawImg.height)}t()}))},isSupportFileApi(){return!!(window.File&&window.FileList&&window.FileReader&&window.Blob&&-1===navigator.userAgent.indexOf("Edge")&&-1===navigator.userAgent.indexOf("MSIE")&&-1===navigator.userAgent.indexOf("Trident"))},dataURLtoFile(t,e){let i=t.split(","),o=i[0].match(/:(.*?);/)[1],n=atob(i[1]),s=n.length,r=new Uint8Array(s);while(s--)r[s]=n.charCodeAt(s);if(this.isSupportFileApi()){let t=new File([r],e,{type:o});return t}return"不支持File对象"},clearAll(){let t=this,e=t.$refs["canvas"],i=e.getContext("2d");i.clearRect(0,0,e.width,e.height);let o=t.$refs["canvasSelectBox"],n=o.getContext("2d");n.clearRect(0,0,o.width,o.height);let s=t.drawImg.sx,r=t.drawImg.sy;this.drawImg={img:null,sx:s,sy:r,swidth:0,sheight:0,x:0,y:0,width:0,height:0},this.isFlipHorizontal=!1,this.isFlipVertically=!1,this.$refs["inputFile"].value="",this.rotateImg.angle=0,this.drawImg.img=null,this.turnReset(),this.clearCutImageObj(),this.$emit("onClearAll",this.index)},clearCutImageObj(){null!==this.cutImageObj&&void 0!==this.cutImageObj&&("function"===typeof this.cutImageObj.remove?this.cutImageObj.remove():this.cutImageObj.removeNode()),this.cutImageObj=null},drawControlBox(t,e,i,o){this.toolBoxOverflow||(t<1&&(t=1),e<1&&(e=1),t>this.drawImg.width&&(t=this.drawImg.width),e>this.drawImg.height&&(e=this.drawImg.height),i<this.drawImg.x&&(i=this.drawImg.x),o<this.drawImg.y&&(o=this.drawImg.y),i>this.drawImg.x+this.drawImg.width-t&&(i=this.drawImg.x+this.drawImg.width-t),o>this.drawImg.y+this.drawImg.height-e&&(o=this.drawImg.y+this.drawImg.height-e)),t>this.boxWidth&&(t=this.boxWidth),e>this.boxHeight&&(e=this.boxHeight),i<0&&(i=0),o<0&&(o=0);let n,s,r=this.$refs["toolBoxControl"],a=this.$refs["canvasSelectBox"],h=a.getContext("2d");if(h.fillStyle=this.selectBoxColor,h.clearRect(0,0,a.width,a.height),h.fillRect(0,0,a.width,a.height),this.rate&&""!==this.rate){let i=this.rate.split(":")[0]/this.rate.split(":")[1];i>=1?(n=t,s=t/i,s+o>this.drawImg.y+this.drawImg.height&&(s=this.drawImg.y+this.drawImg.height-o,n=s*i)):(n=e*i,s=e)}else n=t,s=e;this.toolBox.width=Math.abs(n),this.toolBox.height=Math.abs(s),r.style.width=Math.abs(n)+"px",r.style.height=Math.abs(s)+"px",this.toolBox.boxMove.moveTo.x=i,this.toolBox.boxMove.moveTo.y=o,n<0&&(i+=n),s<0&&(o+=s),i+this.toolBox.width>this.boxWidth&&(i=this.boxWidth-this.toolBox.width),i<0&&(i=0),o+this.toolBox.height>this.boxHeight&&(o=this.boxHeight-this.toolBox.height),o<0&&(o=0),this.toolBoxPosition.x=i,this.toolBoxPosition.y=o,r.style.left=i+"px",r.style.top=o+"px",h.clearRect(i,o,Math.abs(n),Math.abs(s)),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((()=>{this.cropPicture(!0)}),100)},resetToolBox(){this.toolBox.width<0&&(this.toolBox.boxMove.moveTo.x=this.toolBox.x-this.toolBox.width),this.toolBox.height<0&&(this.toolBox.boxMove.moveTo.y=this.toolBox.y-this.toolBox.height),this.toolBox.width=Math.abs(this.toolBox.width),this.toolBox.height=Math.abs(this.toolBox.height)},toolBoxMouseDown(t){let e=this.$refs["toolBoxControl"];this.toolBox.x=parseInt(e.style.left.split("px")[0]),this.toolBox.y=parseInt(e.style.top.split("px")[0]),this.toolBox.disable=!1,this.dropImg.active=!1,this.toolBox.boxMove.start={x:t.pageX,y:t.pageY}},toolBoxMouseMove(t){if(this.dropImg.active&&this.dropImgMove(t),!1===this.toolBox.disable&&!0===this.moveAble){let e=t.pageX-this.toolBox.boxMove.start.x,i=t.pageY-this.toolBox.boxMove.start.y,o=this.toolBox.x+e,n=this.toolBox.y+i;this.drawControlBox(this.toolBox.width,this.toolBox.height,o,n)}},toolBoxMouseLeave(){this.toolBox.disable=!0,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((()=>{this.cropPicture(!0)}),100),this.resetToolBox()},toolBoxMouseUp(){this.toolBox.x=parseInt(this.toolBoxPosition.x),this.toolBox.y=parseInt(this.toolBoxPosition.y),this.toolBox.disable=!0,this.dropImg.active=!1,this.resetToolBox()},printImg(){if(this.drawImg.img){let t=this.$refs["canvas"],e=t.getContext("2d");e.font="18px bold 黑体",e.fillStyle="#ff0",e.textAlign="center",e.textBaseline="middle",e.save(),e.clearRect(0,0,t.width,t.height),e.translate(this.drawImg.x+this.drawImg.width/2,this.drawImg.y+this.drawImg.height/2),e.rotate(this.rotateImg.angle*Math.PI/180),e.translate(-(this.drawImg.x+this.drawImg.width/2),-(this.drawImg.y+this.drawImg.height/2)),e.translate(this.drawImg.x,this.drawImg.y),e.scale(this.isFlipHorizontal?-1:1,this.isFlipVertically?-1:1),e.drawImage(this.drawImg.img,this.drawImg.sx,this.drawImg.sy,this.drawImg.swidth,this.drawImg.sheight,this.isFlipHorizontal?-this.drawImg.width:0,this.isFlipVertically?-this.drawImg.height:0,this.drawImg.width,this.drawImg.height),e.translate(-this.drawImg.x,this.drawImg.y),e.restore(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((()=>{this.cropPicture(!0)}),100)}},dropImgOn(t){!0===this.imgMove&&(this.dropImg.active=!0,this.dropImg.params={...this.drawImg},this.dropImg.pageX=t.pageX,this.dropImg.pageY=t.pageY)},dropImgOff(){this.dropImg.active=!1,this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((()=>{this.cropPicture(!0)}),100)},dropImgMove(t){if(this.dropImg.active&&this.drawImg.img){let e={...this.drawImg};e.x=this.dropImg.params.x-(this.dropImg.pageX-t.pageX),e.y=this.dropImg.params.y-(this.dropImg.pageY-t.pageY),this.toolBoxOverflow||(e.x>this.toolBox.x&&(e.x=this.toolBox.x),e.x<this.toolBox.x+this.toolBox.width-e.width&&(e.x=this.toolBox.x+this.toolBox.width-e.width),e.y>this.toolBox.y&&(e.y=this.toolBox.y),e.y<this.toolBox.y+this.toolBox.height-e.height&&(e.y=this.toolBox.y+this.toolBox.height-e.height)),this.drawImg=e,this.printImg(),t.stopPropagation()}},scaleReset(){this.drawImg.width=this.drawImg.swidth,this.drawImg.height=this.drawImg.sheight,this.printImg()},scaleImgWheel(t){if(this.drawImg.img&&!0===this.scaleAble){let e,i=t||window.event;i.wheelDelta?e=-i.wheelDelta/40:i.detail&&(e=i.detail);let o=50;this.drawImg.x=this.drawImg.width-9*e>o?this.drawImg.x+3*e:this.drawImg.x,this.drawImg.y=this.drawImg.width-9*e>o?this.drawImg.y+3*e:this.drawImg.y,this.drawImg.width=this.drawImg.width-9*e>o?this.drawImg.width-9*e:o,this.drawImg.height=this.drawImg.width/this.scaleImg.rate,this.checkToolBoxOverflow().then((()=>{this.printImg(),this.onPrintImgTimmer&&clearTimeout(this.onPrintImgTimmer),this.onPrintImgTimmer=setTimeout((()=>{this.cropPicture(!0)}),100)}))}return t.preventDefault(),t.returnValue=!1,!1},flipHorizontal(){this.drawImg.img&&(0==this.isFlipHorizontal?this.isFlipHorizontal=!0:this.isFlipHorizontal=!1,this.printImg())},flipVertically(){this.drawImg.img&&(0==this.isFlipVertically?this.isFlipVertically=!0:this.isFlipVertically=!1,this.printImg())},turnImg(t){let e=this.rotateImg.angle,i=e+t;i>=-180&&i<=180&&(this.rotateImg.angle=i,this.rotateControl.position=i/180*100+100,this.printImg("rotate"))},turnReset(){this.rotateImg.angle=0,this.rotateControl.position=100,this.printImg("rotate")},controlBtnMouseDown(t,e){this.controlBox.disable=!1,this.controlBox.btnName=e,this.controlBox.start.x=t.clientX,this.controlBox.start.y=t.clientY,this.controlBox.start.width=this.toolBox.width,this.controlBox.start.height=this.toolBox.height,t.stopPropagation()},controlBtnMouseUp(t){this.controlBox.disable=!0,this.dropImgOff(),this.resetToolBox(),this.toolBoxMouseUp(),t.stopPropagation()},controlBtnMouseMove(t){if(!1===this.controlBox.disable){let e,i,o=t.clientX-this.controlBox.start.x,n=t.clientY-this.controlBox.start.y;if("leftUp"==this.controlBox.btnName){if(this.rate){let t=this.rate.split(":")[0]/this.rate.split(":")[1];t>=1?(e=this.toolBox.x+o,i=this.toolBox.y+o/t):(e=this.toolBox.x+n*t,i=this.toolBox.y+n)}else e=this.toolBox.x+o,i=this.toolBox.y+n;this.toolBox.width=this.controlBox.start.width-o,this.toolBox.height=this.controlBox.start.height-n}if("rightUp"==this.controlBox.btnName){if(this.rate){let t=this.rate.split(":")[0]/this.rate.split(":")[1];t>=1?(e=this.toolBox.x,i=this.toolBox.y-o/t):(e=this.toolBox.x,i=this.toolBox.y+n)}else e=this.toolBox.x,i=this.toolBox.y+n;this.toolBox.width=this.controlBox.start.width+o,this.toolBox.height=this.controlBox.start.height-n}if("rightDown"==this.controlBox.btnName&&(e=this.toolBox.x,i=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+o,this.toolBox.height=this.controlBox.start.height+n),"leftDown"==this.controlBox.btnName){if(this.rate){let t=this.rate.split(":")[0]/this.rate.split(":")[1];t>=1?(e=this.toolBox.x+o,i=this.toolBox.y):(e=this.toolBox.x+-n*t,i=this.toolBox.y)}else e=this.toolBox.x+o,i=this.toolBox.y;this.toolBox.width=this.controlBox.start.width-o,this.toolBox.height=this.controlBox.start.height+n}"topCenter"==this.controlBox.btnName&&(e=this.toolBox.x,i=this.toolBox.y+n,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height-n),"downCenter"==this.controlBox.btnName&&(e=this.toolBox.x,i=this.toolBox.y,this.toolBox.width=this.controlBox.start.width,this.toolBox.height=this.controlBox.start.height+n),"leftCenter"==this.controlBox.btnName&&(e=this.toolBox.x+o,i=this.toolBox.y,this.toolBox.width=this.controlBox.start.width-o,this.toolBox.height=this.controlBox.start.height),"rightCenter"==this.controlBox.btnName&&(e=this.toolBox.x,i=this.toolBox.y,this.toolBox.width=this.controlBox.start.width+o,this.toolBox.height=this.controlBox.start.height),this.drawControlBox(this.toolBox.width,this.toolBox.height,e,i)}t.stopPropagation()},changeFileName(t,e){let i=t.lastIndexOf(".");return t.substr(0,i+1)+("jpeg"===e?"jpg":e)},cropPicture(t){let e=this;if(this.drawImg.img){let i=this.$refs["canvas"];if(this.WatermarkText&&!t){let t=i.getContext("2d");t.font=this.WatermarkTextFont,t.fillStyle=this.WatermarkTextColor,t.textAlign="right",t.textBaseline="bottom",t.fillText(this.WatermarkText,this.toolBox.x+this.toolBox.width*this.WatermarkTextX,this.toolBox.y+this.toolBox.height*this.WatermarkTextY)}let o=new Image;!0===this.crossOrigin&&(o.crossOrigin=this.crossOriginHeader),o.src=i.toDataURL(`image/${this.fileType}`,e.quality),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:(t,o,n)=>{window.atob?setTimeout((()=>{let s,r=atob(i.toDataURL(o,n).split(",")[1]),a=r.length,h=new Uint8Array(a);for(let t=0;t<a;t++)h[t]=r.charCodeAt(t);try{s=new Blob([h],{type:`image/${e.fileType}`})}catch(l){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"==l.name&&window.BlobBuilder){const t=window.BlobBuilder;let i=new t;i.append(h.buffer),s=i.getBlob(`image/${e.fileType}`)}"InvalidStateError"==l.name&&(s=new Blob([h.buffer],{type:`image/${e.fileType}`}))}t(s)}),200):t(!1,{type:`image/${e.fileType}`})}}),i.toBlob((i=>{if(i){let n=new FileReader;n.readAsDataURL(i),n.onload=()=>{let i=setInterval((()=>{if(2==n.readyState){clearInterval(i);let n=document.createElement("canvas"),s=n.getContext("2d");if(1==e.originalGraph){let t=e.drawImg.width/e.drawImg.swidth,i=e.toolBox.width/t,o=e.toolBox.height/t;n.width=i,n.height=o;let r=(e.toolBox.x-e.drawImg.x)/t,a=(e.toolBox.y-e.drawImg.y)/t,h=e.drawImg.swidth,l=e.drawImg.sheight;s.translate(-r,-a),s.drawImage(e.drawImg.img,0,0,h,l)}else{n.width=e.toolBox.width,n.height=e.toolBox.height;let t=e.toolBox;if(e.rate){let i=e.rate.split(":")[0]/e.rate.split(":")[1],n=e.rate.split(":")[0],r=e.rate.split(":")[1];n>=r?s.drawImage(o,t.x,t.y,t.width,t.width*i,0,0,t.width,t.width*i):s.drawImage(o,t.x,t.y,t.width,t.width/i,0,0,t.width,t.width/i)}else s.drawImage(o,t.x,t.y,t.width,t.height,0,0,t.width,t.height)}n.toBlob((i=>{let o=e.changeFileName(e.fileName,e.fileType);t?e.previewMode&&e.$emit("onPrintImg",{index:e.index,fileName:o,blob:i,file:e.dataURLtoFile(n.toDataURL(`image/${e.fileType}`,e.quality),o),dataURL:n.toDataURL(`image/${e.fileType}`,e.quality)}):(e.handleClose(),e.$emit("cutDown",{index:e.index,fileName:o,blob:i,file:e.dataURLtoFile(n.toDataURL(`image/${e.fileType}`,e.quality),o),dataURL:n.toDataURL(`image/${e.fileType}`,e.quality)}))}),`image/${e.fileType}`,e.quality)}}),200)}}else{let i=document.createElement("canvas");i.width=e.toolBox.width,i.height=e.toolBox.height;let n=i.getContext("2d"),s=e.toolBox;if(e.rate){let t=e.rate.split(":")[0]/e.rate.split(":")[1];n.drawImage(o,s.x,s.y,s.width,s.width*t,0,0,s.width,s.width*t)}else n.drawImage(o,s.x,s.y,s.width,s.height,0,0,s.width,s.height);let r=e.changeFileName(e.fileName,e.fileType);t?e.$emit("onPrintImg",{fileName:r,dataURL:i.toDataURL(`image/${e.fileType}`,e.quality)}):(e.handleClose(),e.$emit("cutDown",{fileName:r,dataURL:i.toDataURL(`image/${e.fileType}`,e.quality)}))}})),e.fileType,e.quality}else t||(console.warn("No picture selected"),e.$emit("error",{err:1,msg:"No picture selected"}))},scrollBarControlMove(t){if(this.rotateControl.active){let e=t.pageX-this.rotateControl.start.x,i=this.rotateControl.start.position+e;i<=0&&(i=0),i>=200&&(i=200),this.rotateControl.position=i,this.rotateImg.angle=(i-100)/100*180,this.printImg()}},scrollBarControlOn(t){this.rotateControl.active=!0,this.rotateControl.start.x=t.pageX,this.rotateControl.start.y=t.pageY,this.rotateControl.start.position=this.rotateControl.position},scrollBarControlOff(){this.rotateControl.active=!1}},computed:{showToolBoxWidth(){let t;return t=this.originalGraph?this.toolBox.width/(this.drawImg.width/this.drawImg.swidth):this.toolBox.width,Number(t).toFixed(0)},showToolBoxHeight(){let t;return t=this.originalGraph?this.toolBox.height/(this.drawImg.width/this.drawImg.swidth):this.toolBox.height,Number(t).toFixed(0)},showToolBoxX(){let t;return t=this.toolBoxPosition.x,Number(t).toFixed(0)},showToolBoxY(){let t;return t=this.toolBoxPosition.y,Number(t).toFixed(0)}}},w=x,y=(0,u.Z)(w,f,m,!1,null,"7c03afda",null),C=y.exports,b=C,I=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"uppic"}},[t._t("default"),e("input",{ref:"file",staticClass:"file",attrs:{type:"file"},on:{change:t.getsrc}}),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isuppicBox,expression:"isuppicBox"}],ref:"uppicBox",attrs:{id:"uppicBox"}},[e("div",{staticClass:"imageBox"},[e("img",{ref:"picImg",style:{transform:"translate3d("+t.transform.x+"px,"+t.transform.y+"px,0px) scale("+t.transform.scale+","+t.transform.scale+")",transition:"transform "+t.duration+"ms",width:t.img.w+"px",height:t.img.h+"px","margin-left":t.img.w/-2+"px","margin-top":t.img.h/-2+"px"},attrs:{id:"pic-img",src:t.img.src}}),e("div",{ref:"thumbBox",staticClass:"thumbBox box",class:{bgshadow:t.isbg},style:{width:t.Cwidth+"px",height:t.Cheight+"px","margin-left":0-t.Cwidth/2+"px","margin-top":0-t.Cheight/2+"px"}},[e("div",{staticClass:"angle1"}),e("div",{staticClass:"angle2"}),e("div",{staticClass:"angle3"}),e("div",{staticClass:"angle4"}),e("div",{staticClass:"line1"}),e("div",{staticClass:"line2"}),e("div",{staticClass:"line3"}),e("div",{staticClass:"line4"})])]),e("div",{staticClass:"bottom",on:{click:function(t){t.stopPropagation()}}},[e("span",{on:{click:t.cancel}},[t._v("取消")]),e("span",{staticClass:"fr",on:{click:t.clip}},[t._v("选取")])])])],2)},B=[],T=i(7518),M=i.n(T),A={name:"imgCut",data(){return{transform:{scale:1,x:0,y:0},isuppicBox:!1,isbg:!1,duration:0,Cwidth:0,Cheight:0,img:{Yh:0,Yw:0,h:0,w:0,src:"",Orientation:1},x:0,y:0,initScale:0}},props:{callback:Function,width:{type:Number,default:200,validator:function(t){return 0!=t}},height:{type:Number,default:200},maxscale:{type:Number,default:5},data:{type:Object,default:function(){return{}}}},methods:{getsrc(t){let e=this,i=t.target.files[0],o=new FileReader;o.onloadend=function(t){e.img.src=t.target.result,e.$refs.picImg.onload=e.init},o.readAsDataURL(i)},init(t){let e=this;e.isuppicBox=!0;let i=e.$refs.picImg;e.img.Yw=i.naturalWidth,e.img.Yh=i.naturalHeight,e.sizeimg(),document.body.onresize=e.sizeimg;let o=new(M().Manager)(this.$refs.uppicBox);o.add(new(M().Pan)({threshold:0,pointers:0})),o.add(new(M().Pinch)({threshold:0})).recognizeWith(o.get("pan")),o.add(new(M().Tap)({event:"doubletap",taps:2})),o.add(new(M().Tap)),o.on("doubletap",e.doubletap),o.on("pinchstart pinchmove",e.pinchin),o.on("panstart panmove",e.Pan),o.on("panend",e.panend)},sizeimg:function(){let t,e,i=this,o=document.body.clientWidth,n=document.body.clientHeight,s=i.img.Yh,r=i.img.Yw;o*i.height<n*i.width?(t=o-40,e=t/i.width*i.height):(e=n-40,t=e/i.height*i.width),this.Cwidth=t,this.Cheight=e,r<s?(i.img.w=t,i.img.h=s*t/r):(i.img.h=e,i.img.w=r*e/s)},touchTU:function(t){},doubletap(t){let e=this.transform["scale"];e<this.maxscale&&(this.transform["scale"]=1.4*e)},pinchin(t){"pinchstart"==t.type&&(this.initScale=this.transform.scale||1);let e=this.initScale*t.scale;e<this.maxscale&&(this.transform.scale=e)},Pan(t){"panstart"==t.type&&(this.x=this.transform["x"]||0,this.y=this.transform["y"]||0),this.transform.x=this.x+t.deltaX,this.transform.y=this.y+t.deltaY,this.isbg=!0},panend(){let t=this,e=this.transform.scale,i=this.transform.x,o=this.transform.y,n=this.img.w*e,s=this.img.h*e,r=this.Cwidth,a=this.Cheight,h=(n-r)/2,l=(r-n)/2,c=(s-a)/2,p=(a-s)/2;e<1?(e=1,s>n?i=0:o=0):(i>h?(i=h,console.log("过left底线")):i<l&&(i=l,console.log("过right底线")),o>c?(o=c,console.log("过top底线")):o<p&&(o=p,console.log("过bottom底线"))),this.duration=300,this.transform.scale=e,this.transform.x=i,this.transform.y=o,setTimeout((function(){t.isbg=!1,t.duration=0}),300)},cancel(){this.isuppicBox=!1,this.img.src="",this.transform={scale:1,x:0,y:0},this.$refs.file.value=""},clip(){let t=this,e=t.$refs.picImg,i=document.createElement("canvas"),o=i.getContext("2d"),n=this.transform.scale,s=this.transform.x,r=this.transform.y,a=(this.img.h*n-this.Cheight)/2,h=(this.img.w*n-this.Cwidth)/2,l=this.img.Yh/(this.img.h*n),c=this.Cwidth*l,p=this.Cheight*l,u=(h-s)*l,d=(a-r)*l,g=this.width,f=this.height;i.width=g,i.height=f;t.img.Orientation;o.drawImage(e,u,d,c,p,0,0,g,f);var m=i.toDataURL("image/jpg");this.$emit("callback",m,t.data),this.cancel()}},watch:{}},O=A,E=(0,u.Z)(O,I,B,!1,null,"dfdbdc62",null),S=E.exports,_=i(174),W=i(1604),k={data(){return{picturePathData:"xxx.jpg",crossDomainData:!1,gameId:"",gameValue:"",dialogValue:!1,loadingData:!1,myData:{my_step:"",days:""},stepNum:void 0,fileContent:"",file:null,scanData:"",scanDatas:"",picloalog:!1,timedata:"",btnShow:!1}},components:{ImgCutter:b,imgCut:S,Music:_.Z,ImageCropper:g},mounted(){this.getInfo(),this.init(),this.getTime()},computed:{...(0,W.rn)(["schoolindex"])},methods:{getTime(){(0,s.Yg)().then((t=>{console.log(t),200==t.data.status&&(this.timedata=t.data.data.week)}))},init(){(0,s.nX)({url:""}).then((t=>{if(console.log(t),200===t.status){let e=t.data||{};jWeixin.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:[]}),jWeixin.ready((()=>{jWeixin.hideMenuItems({menuList:["menuItem:copyUrl","menuItem:share:appMessage","menuItem:share:timeline","menuItem:share:qq","menuItem:share:weiboApp","menuItem:share:facebook","menuItem:share:QZone"]}),jWeixin.hideOptionMenu()}))}else this.handleError(t)}))},cancelMethod(t){this.picloalog=!1},confirmMethod(t){this.stepNum=void 0,console.log(t),this.picloalog=!1,this.scanData=t.base64,this.getStep()},cutDown(t){console.log(t)},getInfo(){let t=this.schoolindex;console.log(t),(0,s.ts)({addr:t}).then((t=>{console.log(t),200==t.data.status&&(this.myData.days=t.data.data.days,this.myData.my_step=t.data.data.my_step)}))},back(){this.$router.push("/pagefour")},async goto(t){console.log(t),this.picloalog=!0,this.fileContent=t.content,this.file=t.file},async getStep(){this.loadingData=!0;let t="wUbxngjGDBUEsS-kulRcXh2Jp-9dXkVM",e="gxcRJD0wqwVElf2OemeFMLWqLIo9ywNR",i=this.scanData,o=new FormData;o.append("api_key",t),o.append("api_secret",e),o.append("image_base64",i);let n=await(0,l.ZP)({url:"https://api-cn.faceplusplus.com/imagepp/v2/generalocr",method:"post",data:o});if(this.loadingData=!1,200==n.status){let t=n.data.text_info,e=t.findIndex((t=>"今日运动"===t.line_content));if(e<0)return void this.Toast("请截图包含今日运动部分");let i=t[e+1]||{},o=i.line_content;if(!o||!/^\d+月\d+日/.test(o))return void this.Toast("请截图包含日期部分");let s=o.match(/\d+/g),r=s[0],a=s[1],h=new Date;if(Number(r)!==h.getMonth()+1||Number(a)!==h.getDate())return void this.Toast("截图的运动日期不是今天，请上传今天的运动截图");let l=t.findIndex((t=>"步数"===t.line_content));if(l<0)return void this.Toast("请截图包含步数部分");let c=t[l+1]||{},p=c.line_content;if(!p||isNaN(p))return void this.Toast("请截图包含步数部分");if(p<100)return void this.Toast("同学，今天的运动步数不达标哦，需要达到一万步才可以打卡成功");console.log(p),this.stepNum=p,this.btnShow=!0}else this.Toast("获取步数发生错误，请重新上传")},gotopm(){this.$router.push("/fourpm")},async submit(){if(!this.stepNum)return this.Toast("未获取到步数信息，请上传图片");this.loadingData=!0;let t=await(0,s.WA)(),e=t.data.data;console.log(t);const i=new FormData,o=(new Date).getTime()+".jpg";console.log(o),i.append("name",`${o}`),i.append("key",e.dir+o),i.append("policy",e.policy),i.append("OSSAccessKeyId",e.accessid),i.append("callback",e.callback),i.append("signature",e.signature),i.append("file",this.file),(0,s.F_)(e.host,i).then((t=>{console.log(t),this.loadingData=!1,200==t.data.status?(this.scanDatas=t.data.data.filename,this.submitInfo()):this.Toast("上传图片错误，请重试")}))},async submitInfo(){this.loadingData=!0;var t=new Date,e=t.getMonth()+1,i=t.getDate();e=e>9?e:"0"+e,i=i<10?"0"+i:i;var o=e+"月"+i+"日";console.log(o),console.log(this.scanData),(0,s.wI)({date_str:o,step_num:this.stepNum,img_uri:this.scanDatas}).then((t=>{console.log(t),this.loadingData=!1,200==t.data.status?(this.dialogValue=!0,this.getInfo()):(this.Toast(t.data.msg),this.getInfo())}))}}},Y=k,H=(0,u.Z)(Y,o,n,!1,null,"6c1a4a17",null),N=H.exports},84:function(t){"use strict";t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEsAAAAYCAYAAACyVACzAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkVFOTFGNzE5NjNGMDExRURCQ0JBRUIzQjRFRjFCNEZBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkVFOTFGNzFBNjNGMDExRURCQ0JBRUIzQjRFRjFCNEZBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6RUU5MUY3MTc2M0YwMTFFREJDQkFFQjNCNEVGMUI0RkEiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6RUU5MUY3MTg2M0YwMTFFREJDQkFFQjNCNEVGMUI0RkEiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7vGhMFAAADrElEQVR42tyZW0gUURzGZ7Swm9FlKSvpAkVgRCWWFEkUXbaLFtntIQgpiZ56q16iXqqH3nrvoYigjLD7hdhuZFlk9VBKUqIR0QVLStNV9/Qd+AYOw9nZ44yzrg38mNmd/+7O+fxfj7YQwvJxjAJFoAe8Au0B7QbFMcTHZ8aACrATPAONSUQwtftvxZoEKsF+8Bv8AgvAX9ALpJsmwDiwHmwHP8EnkA/G874b4To718J1zxTLdda9Z2muda99iTUTHACbwA9wETwBXbxvc1FSlK1gGfgCzoD7ip2l2LtfC8217uG9coed4n7onjUPHAErwXtwiTmoRyPoDrAEvANnwXONnRVwQV6CiH76DV9iSQ85ChaCN+AC80/CZTeXYVcIXoDToF5j51607QoVk0NkWs7KZsgdAxPBI3AdNLseNosVr4J2d+l5jQbekUgSekE8K+1hmAv2gH1gAohRqO+uBxkBisFmkAdugCrwdQC9Q6TTs2QlO8zcI/9KV8E90OZKzCPBKrCR78nwvAZaDfOJ2xNECKLYKX4zkFiykp0AURAH1aCGrYH65REm+yir3HlWvHZNlfN6SNtnGJrah5bg89kalIJv4CYrWRd/1MkxEYZdCVsDmZ8eU1yvPJIxiTqIWHIhc8AhsIEJXOant6BbWag8TwNbWBnrGXq6FsI2FCVVP2XiQSKdYk0FB0EZQ+kl+KAp+REKVcwW4hxooJ2tnHX5xw4QVqKPnwstPLPYIkxhwv7DL8pS7qu2clwZBjqV92yDsEtnuIVaDVvASeac1WwqH9LD2hRbOeJcZmgWsmreBk85I1p+5q1+SuRpqYa2skVTAHaBcjAa1LHBbOGQnFBmv+VgMRjKankFfFRsejWDcm+S18JjoA5rkLY8cqUwEcvZVlkD9oJFzF13mMQ7lJ2F4dxtWAtmcw6s5lZMRxLBvHYbvETLWLGcYz63Ysq56BqOO82KCPI8HawDS9mLxShuE8PVVKhUImW0WE71K+XYU8Awk+PMa3qPYMuQy5CMsrI2sPeqVbxMJAnNVF5m+RQs7WKpQ/Juelk724sY578eZVGzuOFXwg2/W+SzT8/y61UDJpZzTAbbuEU8gw2r42VxxXPGghUchfKY66pYLDoNBBMGHpbxYskjh+FWyZCT28qnKIgaZtmcCMrYwEovO86wNAnD/qiIoYjVl21lOSM+YE6qZdWMa+y66UlN9LIiwy48kWQRGTM/2j7/FZbDbr5V6eaD2A2K458AAwCJWDlL/sW9gAAAAABJRU5ErkJggg=="},2886:function(t,e,i){"use strict";t.exports=i.p+"img/sl.d8d3a903.jpg"}}]);
//# sourceMappingURL=342.a6096937.js.map