"use strict";(self["webpackChunkschoolactivities"]=self["webpackChunkschoolactivities"]||[]).push([[19],{9019:function(a,t,s){s.r(t),s.d(t,{default:function(){return r}});var i=function(){var a=this,t=a._self._c;return t("div",{attrs:{id:"fourupdata"}},[t("div",{staticClass:"home_container"},[t("div",{staticClass:"iconback"},[t("van-icon",{attrs:{name:"arrow-left"},on:{click:a.back}})],1),t("div",{staticClass:"pm",on:{click:a.gotopm}},[a._v("排行榜")]),a._m(0),t("div",{staticClass:"home_info"},[t("div",{staticClass:"home_info_cont"},[t("p",[a._v("我的步数：")]),t("p",[a._v(a._s(a.myData.my_step))])]),t("div",{staticClass:"home_info_cont"},[t("p",[a._v("已连续打卡：")]),t("p",[a._v(a._s(a.myData.days)+"天")])])]),t("div",{staticClass:"title"},[a._v("示例:")]),t("div",{staticClass:"uploader"},[a.scanData?t("img",{attrs:{src:a.scanData,alt:""}}):t("img",{attrs:{src:s(2886),alt:""}})]),a._m(1),a._m(2),t("div",{staticClass:"back_btn"},[t("div",{staticClass:"back"},[t("van-uploader",{attrs:{"after-read":a.goto}},[t("div",[a._v("上传图片")])])],1),t("div",{staticClass:"back"},[t("div",{on:{click:a.submit}},[a._v("提交")])])]),t("van-popup",{model:{value:a.dialogValue,callback:function(t){a.dialogValue=t},expression:"dialogValue"}},[t("div",{staticClass:"dialog_tis",staticStyle:{"margin-top":"4.2667rem"}},[a._v(" 恭喜您上传成功 ")]),t("div",{staticClass:"dialog_tis"},[a._v("今日步数已累计添加到每周排名")]),t("div",{staticClass:"dialog_tis"},[a._v("请在周四查看排行榜信息")]),t("div",{staticClass:"dialog_back"},[t("div",{on:{click:function(t){a.dialogValue=!1}}},[a._v("确定")])])]),a.loadingData?t("van-loading",{attrs:{type:"spinner",size:"24px"}},[a._v("加载中...")]):a._e()],1)])},e=[function(){var a=this,t=a._self._c;return t("div",{staticClass:"home_title"},[t("p",[a._v("雀巢咖啡，提醒每一天")]),t("h1",[a._v("同学，请放下手机运动吧！")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"tix"},[t("p",[a._v("步骤：打开微信运动 - 步数排行榜 - 个人排行")]),t("p",{staticStyle:{"font-size":"0.5067rem","margin-top":"0.1333rem"}},[a._v(" 截图保存上传图片 ")])])},function(){var a=this,t=a._self._c;return t("div",{staticClass:"tix"},[t("p",{staticStyle:{"font-size":"0.2667rem","line-height":"0.48rem"}},[a._v(" 上传成功即可累计步数参加每周排行 ")])])}],o=(s(7658),s(5214)),n=s(70),l={data(){return{gameId:"",gameValue:"",dialogValue:!1,loadingData:!1,myData:{my_step:"",days:""},scanData:""}},mounted(){this.getInfo()},methods:{getInfo(){(0,o.ts)().then((a=>{console.log(a),200==a.data.status&&(this.myData.days=a.data.data.days,this.myData.my_step=a.data.data.my_step)}))},back(){this.$router.push("/pagefour")},async goto(a){console.log(a),this.loadingData=!0;let t="wUbxngjGDBUEsS-kulRcXh2Jp-9dXkVM",s="gxcRJD0wqwVElf2OemeFMLWqLIo9ywNR",i=a.content,e=new FormData;e.append("api_key",t),e.append("api_secret",s),e.append("image_base64",i);let l=await(0,n.ZP)({url:"https://api-cn.faceplusplus.com/imagepp/v2/generalocr",method:"post",data:e});200==l.status&&(this.loadingData=!1,"步数"==l.data.text_info[3]&&(this.myData.my_step=l.data.text_info[4]));let c=await(0,o.WA)(),d=c.data.data;console.log(c);const p=new FormData,r=a.file.name;p.append("name",`${(new Date).getTime()}${r}`),p.append("key",d.dir+r),p.append("policy",d.policy),p.append("OSSAccessKeyId",d.accessid),p.append("callback",d.callback),p.append("signature",d.signature),p.append("file",a.file),(0,o.F_)(d.host,p).then((a=>{console.log(a),200==a.data.status&&(this.scanData=i)}))},gotopm(){this.$router.push("/fourpm")},submit(){if(""==this.myData.my_step)return this.Toast("请上传图片");if(""==this.scanData)return this.Toast("请上传图片");this.myData.my_step&&(this.loadingData=!0);var a=new Date,t=a.getMonth()+1,s=a.getDate();t=t>9?t:"0"+t,s=s<10?"0"+s:s;var i=t+"月"+s+"日";console.log(i),(0,o.wI)({date_str:i,step_num:this.myData.my_step,img_uri:this.scanData}).then((a=>{console.log(a),this.loadingData=!1,200==a.data.status?this.dialogValue=!1:this.Toast(a.data.msg)}))}}},c=l,d=s(1001),p=(0,d.Z)(c,i,e,!1,null,"32201a58",null),r=p.exports},2886:function(a,t,s){a.exports=s.p+"img/sl.d8d3a903.jpg"}}]);
//# sourceMappingURL=19.eef63e69.js.map